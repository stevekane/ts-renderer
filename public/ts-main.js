(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";
var BufferType;
(function (BufferType) {
    BufferType[BufferType["BYTE"] = 0] = "BYTE";
    BufferType[BufferType["UNSIGNED_BYTE"] = 1] = "UNSIGNED_BYTE";
    BufferType[BufferType["SHORT"] = 2] = "SHORT";
    BufferType[BufferType["UNSIGNED_SHORT"] = 3] = "UNSIGNED_SHORT";
    BufferType[BufferType["FLOAT"] = 4] = "FLOAT";
})(BufferType = exports.BufferType || (exports.BufferType = {}));
class Floats {
    constructor(size, value) {
        this.size = size;
        this.value = value;
        this.offset = 0;
        this.stride = 0;
        this.bufferType = BufferType.FLOAT;
    }
    setup(gl, a) {
        const { loc, size, bufferType, buffer, stride = 0, offset = 0 } = a;
        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
        gl.enableVertexAttribArray(a.loc);
        gl.vertexAttribPointer(loc, size, toGLType(gl, bufferType), false, stride, offset);
    }
    set(gl, a, value) {
        gl.bufferData(gl.ARRAY_BUFFER, value, gl.DYNAMIC_DRAW);
    }
    teardown(gl, a) {
        gl.disableVertexAttribArray(a.loc);
        gl.bindBuffer(gl.ARRAY_BUFFER, null);
    }
}
exports.Floats = Floats;
function setupAttribute(gl, program, name, acfg) {
    const { value, bufferType, size, set, setup, teardown, offset = 0, stride = 0 } = acfg;
    const loc = gl.getAttribLocation(program, name);
    const buffer = gl.createBuffer();
    if (loc == null)
        return new Error(`Could not locate attr: ${name}`);
    if (buffer == null)
        return new Error(`Could not create buffer for attr: ${name}`);
    const a = { value, bufferType, size, offset, stride, loc, buffer, set, setup, teardown };
    setup(gl, a);
    set(gl, a, value);
    teardown(gl, a);
    return a;
}
exports.setupAttribute = setupAttribute;
function toGLType(gl, bufferType) {
    switch (bufferType) {
        case BufferType.FLOAT: return gl.FLOAT;
        case BufferType.SHORT: return gl.SHORT;
        case BufferType.BYTE: return gl.BYTE;
        case BufferType.UNSIGNED_SHORT: return gl.UNSIGNED_SHORT;
        case BufferType.UNSIGNED_BYTE: return gl.UNSIGNED_BYTE;
        default:
            const n = bufferType;
            return n;
    }
}

},{}],2:[function(require,module,exports){
"use strict";
const Uniforms_1 = require("./Uniforms");
const Attributes_1 = require("./Attributes");
function run(cmd, p) {
    const { gl, program } = cmd;
    const { attributes, uniforms, count } = p;
    gl.useProgram(program);
    for (const key in cmd.uniforms) {
        const { loc, value, set } = cmd.uniforms[key];
        const val = uniforms && uniforms[key] || value;
        set(gl, loc, val);
    }
    for (const key in cmd.attributes) {
        const a = cmd.attributes[key];
        const val = attributes && attributes[key];
        a.setup(gl, a);
        if (val != null)
            a.set(gl, a, val);
    }
    gl.drawArrays(gl.TRIANGLES, 0, count);
    for (const key in cmd.attributes) {
        const a = cmd.attributes[key];
        a.teardown(gl, a);
    }
    gl.useProgram(null);
}
exports.run = run;
function createCommand(gl, cfg) {
    const program = fromSource(gl, cfg.vsrc, cfg.fsrc);
    if (program instanceof Error)
        return program;
    const uniforms = setupUniforms(gl, program, cfg.uniforms);
    if (uniforms instanceof Error)
        uniforms;
    const attributes = setupAttributes(gl, program, cfg.attributes);
    if (attributes instanceof Error)
        return attributes;
    return { gl, program, uniforms, attributes };
}
exports.createCommand = createCommand;
function setupUniforms(gl, program, ucfgs) {
    const out = {};
    gl.useProgram(program);
    for (const key in ucfgs) {
        const uniform = Uniforms_1.setupUniform(gl, program, key, ucfgs[key]);
        if (uniform instanceof Error)
            return uniform;
        else
            out[key] = uniform;
    }
    gl.useProgram(null);
    return out;
}
function setupAttributes(gl, program, uattrs) {
    const out = {};
    gl.useProgram(program);
    for (const key in uattrs) {
        const attr = Attributes_1.setupAttribute(gl, program, key, uattrs[key]);
        if (attr instanceof Error)
            return attr;
        else
            out[key] = attr;
    }
    gl.useProgram(null);
    return out;
}
function compileShader(gl, kind, src) {
    const shader = gl.createShader(kind);
    const kindStr = kind === gl.VERTEX_SHADER ? 'VERTEX' : 'FRAGMENT';
    gl.shaderSource(shader, src);
    gl.compileShader(shader);
    return shader && gl.getShaderParameter(shader, gl.COMPILE_STATUS)
        ? shader
        : new Error(`${kindStr}: ${gl.getShaderInfoLog(shader) || ''}`);
}
exports.compileShader = compileShader;
function fromSource(gl, vsrc, fsrc) {
    const vertex = compileShader(gl, gl.VERTEX_SHADER, vsrc);
    const fragment = compileShader(gl, gl.FRAGMENT_SHADER, fsrc);
    const program = gl.createProgram();
    if (vertex instanceof Error)
        return vertex;
    if (fragment instanceof Error)
        return fragment;
    gl.attachShader(program, vertex);
    gl.attachShader(program, fragment);
    gl.linkProgram(program);
    return program && gl.getProgramParameter(program, gl.LINK_STATUS)
        ? program
        : new Error(gl.getProgramInfoLog(program) || '');
}
exports.fromSource = fromSource;

},{"./Attributes":1,"./Uniforms":4}],3:[function(require,module,exports){
"use strict";

},{}],4:[function(require,module,exports){
"use strict";
const utils_1 = require("./utils");
class UF {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform1f(h, t); }
}
exports.UF = UF;
class U2F {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform2f(h, t[0], t[1]); }
}
exports.U2F = U2F;
class U3F {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform3f(h, t[0], t[1], t[2]); }
}
exports.U3F = U3F;
class U4F {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform4f(h, t[0], t[1], t[2], t[3]); }
}
exports.U4F = U4F;
class UI {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform1i(h, t); }
}
exports.UI = UI;
class U2I {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform2i(h, t[0], t[1]); }
}
exports.U2I = U2I;
class U3I {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform3i(h, t[0], t[1], t[2]); }
}
exports.U3I = U3I;
class U4I {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform4i(h, t[0], t[1], t[2], t[3]); }
}
exports.U4I = U4I;
class UFV {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform1fv(h, utils_1.asF32(t)); }
}
exports.UFV = UFV;
class U2FV {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform2fv(h, utils_1.asF32(t)); }
}
exports.U2FV = U2FV;
class U3FV {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform3fv(h, utils_1.asF32(t)); }
}
exports.U3FV = U3FV;
class U4FV {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform4fv(h, utils_1.asF32(t)); }
}
exports.U4FV = U4FV;
class UIV {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform1iv(h, utils_1.asI32(t)); }
}
exports.UIV = UIV;
class U2IV {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform2iv(h, utils_1.asI32(t)); }
}
exports.U2IV = U2IV;
class U3IV {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform3iv(h, utils_1.asI32(t)); }
}
exports.U3IV = U3IV;
class U4IV {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform4iv(h, utils_1.asI32(t)); }
}
exports.U4IV = U4IV;
class UMatrix2 {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniformMatrix2fv(h, false, utils_1.asF32(t)); }
}
exports.UMatrix2 = UMatrix2;
class UMatrix3 {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniformMatrix3fv(h, false, utils_1.asF32(t)); }
}
exports.UMatrix3 = UMatrix3;
class UMatrix4 {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniformMatrix4fv(h, false, utils_1.asF32(t)); }
}
exports.UMatrix4 = UMatrix4;
function setupUniform(gl, program, name, ucfg) {
    const { value, set } = ucfg;
    const loc = gl.getUniformLocation(program, name);
    if (loc == null)
        return new Error(`Could not find uniform ${name}`);
    else
        return (set(gl, loc, value), { value, set, loc });
}
exports.setupUniform = setupUniform;

},{"./utils":6}],5:[function(require,module,exports){
"use strict";
const Attributes = require("./Attributes");
exports.Attributes = Attributes;
const Uniforms = require("./Uniforms");
exports.Uniforms = Uniforms;
const Command = require("./Command");
exports.Command = Command;
const GLTypes = require("./GLTypes");
exports.GLTypes = GLTypes;

},{"./Attributes":1,"./Command":2,"./GLTypes":3,"./Uniforms":4}],6:[function(require,module,exports){
"use strict";
function asF32(t) {
    return t instanceof Float32Array ? t : new Float32Array(t);
}
exports.asF32 = asF32;
function asI32(t) {
    return t instanceof Int32Array ? t : new Int32Array(t);
}
exports.asI32 = asI32;
function toError(s, v) {
    return v == null ? new Error(s) : v;
}
exports.toError = toError;

},{}],7:[function(require,module,exports){
"use strict";
function loadBinary(uri) {
    return new Promise(function (res, rej) {
        const xhr = new XMLHttpRequest;
        xhr.responseType = 'arraybuffer';
        xhr.onload = _ => res(xhr.response);
        xhr.onerror = _ => rej(`Could not load ${uri}`);
        xhr.open('GET', uri);
        xhr.send();
    });
}
exports.loadBinary = loadBinary;
function loadString(uri) {
    return new Promise(function (res, rej) {
        const xhr = new XMLHttpRequest;
        xhr.onload = _ => res(xhr.response);
        xhr.onerror = _ => rej(`Could not load ${uri}`);
        xhr.open('GET', uri);
        xhr.send();
    });
}
exports.loadString = loadString;
function loadImage(uri) {
    return new Promise(function (res, rej) {
        const i = new Image;
        i.src = uri;
        i.onload = _ => res(i);
        i.onerror = rej;
    });
}
exports.loadImage = loadImage;

},{}],8:[function(require,module,exports){
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments)).next());
    });
};
const Load_1 = require("./Load");
const Commando_1 = require("./Commando");
const F32_BYTE_SIZE = 4;
function load(gl) {
    return __awaiter(this, void 0, void 0, function* () {
        const loadVert = Load_1.loadString('brick/vertex.glsl');
        const loadFrag = Load_1.loadString('brick/fragment.glsl');
        const loadTex = Load_1.loadImage('brick/diffuse.jpg');
        const loadBuf = Load_1.loadBinary('brick/data.bin');
        const [vsrc, fsrc, diffuse, buffer] = yield Promise.all([loadVert, loadFrag, loadTex, loadBuf]);
        const program = Commando_1.Command.fromSource(gl, vsrc, fsrc);
        // This data would come from a schema file
        const positionCount = 9;
        const colorCount = 12;
        const texCount = 6;
        const bufferViews = {
            a_position: new Float32Array(buffer, 0, positionCount),
            a_color: new Float32Array(buffer, positionCount * F32_BYTE_SIZE, colorCount),
            a_texCoord: new Float32Array(buffer, (positionCount + colorCount) * F32_BYTE_SIZE, texCount)
        };
        const textures = {
            diffuse
        };
        return program instanceof Error
            ? program
            : { count: 3, program, buffer, bufferViews, textures };
    });
}
function main(gl) {
    return __awaiter(this, void 0, void 0, function* () {
        const sceneData = yield load(gl);
        if (sceneData instanceof Error)
            return;
        const { count, buffer: b, program: p, bufferViews: { a_position, a_color, a_texCoord }, textures: { diffuse } } = sceneData;
        const a_loc = {
            a_position: gl.getAttribLocation(p, 'a_position'),
            a_color: gl.getAttribLocation(p, 'a_color'),
            a_texCoord: gl.getAttribLocation(p, 'a_texCoord')
        };
        const u_loc = {
            u_time: gl.getUniformLocation(p, 'u_time'),
            u_diffuse: gl.getUniformLocation(p, 'u_diffuse')
        };
        const glBuffer = gl.createBuffer();
        const textureDiffuse = gl.createTexture();
        gl.enable(gl.CULL_FACE);
        gl.cullFace(gl.BACK);
        gl.clearColor(0, 0, 0, 0);
        gl.useProgram(p);
        gl.bindBuffer(gl.ARRAY_BUFFER, glBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, b, gl.DYNAMIC_DRAW);
        gl.bindTexture(gl.TEXTURE_2D, textureDiffuse);
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, diffuse);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);
        gl.generateMipmap(gl.TEXTURE_2D);
        gl.bindTexture(gl.TEXTURE_2D, null);
        gl.bindBuffer(gl.ARRAY_BUFFER, null);
        gl.useProgram(null);
        const render = function render() {
            gl.viewport(0, 0, c.width, c.height);
            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
            gl.useProgram(p);
            // uniforms
            gl.activeTexture(gl.TEXTURE0);
            gl.bindTexture(gl.TEXTURE_2D, textureDiffuse);
            gl.uniform1i(u_loc.u_diffuse, 0); // this 0 is the texture register for gl.TEXTURE0
            gl.uniform1f(u_loc.u_time, performance.now());
            gl.bindBuffer(gl.ARRAY_BUFFER, glBuffer);
            gl.enableVertexAttribArray(a_loc.a_position);
            gl.vertexAttribPointer(a_loc.a_position, 3, gl.FLOAT, false, 0, a_position.byteOffset);
            gl.enableVertexAttribArray(a_loc.a_color);
            gl.vertexAttribPointer(a_loc.a_color, 4, gl.FLOAT, false, 0, a_color.byteOffset);
            gl.enableVertexAttribArray(a_loc.a_texCoord);
            gl.vertexAttribPointer(a_loc.a_texCoord, 2, gl.FLOAT, false, 0, a_texCoord.byteOffset);
            gl.drawArrays(gl.TRIANGLES, 0, count);
            gl.disableVertexAttribArray(a_loc.a_position);
            gl.disableVertexAttribArray(a_loc.a_color);
            gl.disableVertexAttribArray(a_loc.a_texCoord);
            gl.bindBuffer(gl.ARRAY_BUFFER, null);
            gl.bindTexture(gl.TEXTURE_2D, null);
            gl.useProgram(null);
            requestAnimationFrame(render);
        };
        render();
    });
}
const c = document.getElementById('target');
const gl = c.getContext('webgl');
main(gl);

},{"./Commando":5,"./Load":7}]},{},[8])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Vzci9sb2NhbC9saWIvbm9kZV9tb2R1bGVzL3dhdGNoaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvQ29tbWFuZG8vQXR0cmlidXRlcy50cyIsInNyYy9Db21tYW5kby9Db21tYW5kLnRzIiwic3JjL0NvbW1hbmRvL1VuaWZvcm1zLnRzIiwic3JjL0NvbW1hbmRvL2luZGV4LnRzIiwic3JjL0NvbW1hbmRvL3V0aWxzLnRzIiwic3JjL0xvYWQudHMiLCJzcmMvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUNnQkEsSUFBWSxVQUFnRTtBQUE1RSxXQUFZLFVBQVU7SUFBRywyQ0FBSSxDQUFBO0lBQUUsNkRBQWEsQ0FBQTtJQUFFLDZDQUFLLENBQUE7SUFBRSwrREFBYyxDQUFBO0lBQUUsNkNBQUssQ0FBQTtBQUFDLENBQUMsRUFBaEUsVUFBVSxHQUFWLGtCQUFVLEtBQVYsa0JBQVUsUUFBc0Q7QUFxQjVFO0lBSUUsWUFBb0IsSUFBbUIsRUFBUyxLQUFtQjtRQUEvQyxTQUFJLEdBQUosSUFBSSxDQUFlO1FBQVMsVUFBSyxHQUFMLEtBQUssQ0FBYztRQUhuRSxXQUFNLEdBQUcsQ0FBQyxDQUFBO1FBQ1YsV0FBTSxHQUFHLENBQUMsQ0FBQTtRQUNELGVBQVUsR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFBO0lBQ2lDLENBQUM7SUFDeEUsS0FBSyxDQUFDLEVBQU0sRUFBRSxDQUEwQjtRQUN0QyxNQUFNLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQTtRQUVuRSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUFDLENBQUE7UUFDdEMsRUFBRSxDQUFDLHVCQUF1QixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FB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QUFBO0lBQzNCLE1BQU0sRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQTtJQUV6QyxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBRXRCLEdBQUcsQ0FBQyxDQUFFLE1BQU0sR0FBRyxJQUFJLEdBQUcsQ0FBQyxRQUFTLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLE1BQU0sRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLEdBQUcsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDN0MsTUFBTSxHQUFHLEdBQUcsUUFBUSxJQUFJLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLENBQUE7UUFFOUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUE7SUFDbkIsQ0FBQztJQUVELEdBQUcsQ0FBQyxDQUFFLE1BQU0sR0FBRyxJQUFJLEdBQUcsQ0FBQyxVQUFXLENBQUMsQ0FBQyxDQUFDO1FBQ25DLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDN0IsTUFBTSxHQUFHLEdBQUcsVUFBVSxJQUFJLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUV6QyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUNkLEVBQUUsQ0FBQyxDQUFFLEdBQUcsSUFBSSxJQUFLLENBQUM7WUFBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUE7SUFDdEMsQ0FBQztJQUVELEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUE7SUFFckMsR0FBRyxDQUFDLENBQUUsTUFBTSxHQUFHLElBQUksR0FBRyxDQUFDLFVBQVcsQ0FBQyxDQUFDLENBQUM7UUFDbkMsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLFVBQVUsQ0FB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QUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUMzRTtBQUhELGtCQUdDO0FBRUQ7SUFDRSxZQUFvQixLQUFhO1FBQWIsVUFBSyxHQUFMLEtBQUssQ0FBUTtJQUFJLENBQUM7SUFDdEMsR0FBRyxDQUFFLEVBQU0sRUFBRSxDQUFNLEVBQUUsQ0FBUyxJQUFLLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLGFBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUNoRTtBQUhELGtCQUdDO0FBRUQ7SUFDRSxZQUFvQixLQUFhO1FBQWIsVUFBSyxHQUFMLEtBQUssQ0FBUTtJQUFJLENBQUM7SUFDdEMsR0FBRyxDQUFFLEVBQU0sRUFBRSxDQUFNLEVBQUUsQ0FBUyxJQUFLLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLGFBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUNoRTtBQUhELG9CQUdDO0FBRUQ7SUFDRSxZQUFvQixLQUFhO1FBQWIsVUFBSyxHQUFMLEtBQUssQ0FBUTtJQUFJLENBQUM7SUFDdEMsR0FBRyxDQUFFLEVBQU0sRUFBRSxDQUFNLEVBQUUsQ0FBUyxJQUFLLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLGFBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUNoRTtBQUhELG9CQUdDO0FBRUQ7SUFDRSxZQUFvQixLQUFhO1FBQWIsVUFBSyxHQUFMLEtBQUssQ0FBUTtJQUFJLENBQUM7SUFDdEMsR0FBRyxDQUFFLEVBQU0sRUFBRSxDQUFNLEVBQUUsQ0FBUyxJQUFLLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLGFBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUNoRTtBQUhELG9CQUdDO0FBRUQ7SUFDRSxZQUFvQixLQUFXO1FBQVgsVUFBSyxHQUFMLEtBQUssQ0FBTTtJQUFJLENBQUM7SUFDcEMsR0FBRyxDQUFFLEVBQU0sRUFBRSxDQUFNLEVBQUUsQ0FBTyxJQUFLLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLGFBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUM5RDtBQUhELGtCQUdDO0FBRUQ7SUFDRSxZQUFvQixLQUFXO1FBQVgsVUFBSyxHQUFMLEtBQUssQ0FBTTtJQUFJLENBQUM7SUFDcEMsR0FBRyxDQUFFLEVBQU0sRUFBRSxDQUFNLEVBQUUsQ0FBTyxJQUFLLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLGFBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUM5RDtBQUhELG9CQUdDO0FBRUQ7SUFDRSxZQUFvQixLQUFXO1FBQVgsVUFBSyxHQUFMLEtBQUssQ0FBTTtJQUFJLENBQUM7SUFDcEMsR0FBRyxDQUFFLEVBQU0sRUFBRSxDQUFNLEVBQUUsQ0FBTyxJQUFLLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLGFBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUM5RDtBQUhELG9CQUdDO0FBRUQ7SUFDRSxZQUFvQixLQUFXO1FBQVgsVUFBSyxHQUFMLEtBQUssQ0FBTTtJQUFJLENBQUM7SUFDcEMsR0FBRyxDQUFFLEVBQU0sRUFBRSxDQUFNLEVBQUUsQ0FBTyxJQUFLLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLGFBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUM5RDtBQUhELG9CQUdDO0FBRUQ7SUFDRSxZQUFvQixLQUFhO1FBQWIsVUFBSyxHQUFMLEtBQUssQ0FBUTtJQUFJLENBQUM7SUFDdEMsR0FBRyxDQUFFLEVBQU0sRUFBRSxDQUFNLEVBQUUsQ0FBUyxJQUFLLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLGFBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUM3RTtBQUhELDRCQUdDO0FBRUQ7SUFDRSxZQUFvQixLQUFhO1FBQWIsVUFBSyxHQUFMLEtBQUssQ0FBUTtJQUFJLENBQUM7SUFDdEMsR0FBRyxDQUFFLEVBQU0sRUFBRSxDQUFNLEVBQUUsQ0FBUyxJQUFLLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLGFBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUM3RTtBQUhELDRCQUdDO0FBRUQ7SUFDRSxZQUFvQixLQUFhO1FBQWIsVUFBSyxHQUFMLEtBQUssQ0FBUTtJQUFJLENBQUM7SUFDdEMsR0FBRyxDQUFFLEVBQU0sRUFBRSxDQUFNLEVBQUUsQ0FBUyxJQUFLLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLGFBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUM3RTtBQUhELDRCQUdDO0FBRUQsc0JBQWtDLEVBQU0sRUFBRSxPQUFnQixFQUFFLElBQVksRUFBRSxJQUFtQjtJQUMzRixNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQTtJQUMzQixNQUFNLEdBQUcsR0FBRyxFQUFFLENBQUMsa0JBQWtCLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFBO0lBRWhELEVBQUUsQ0FBQyxDQUFFLEdBQUcsSUFBSSxJQUFLLENBQUM7UUFBQyxNQUFNLENBQUMsSUFBSSxLQUFLLENBQUMsMEJBQTJCLElBQUssRUFBRSxDQUFDLENBQUE7SUFDdkUsSUFBSTtRQUFlLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFBO0FBQ3RFLENBQUM7QUFORCxvQ0FNQzs7OztBQ3BIRCwyQ0FBMEM7QUFLakMsZ0NBQVU7QUFKbkIsdUNBQXNDO0FBSWpCLDRCQUFRO0FBSDdCLHFDQUFvQztBQUdMLDBCQUFPO0FBRnRDLHFDQUFvQztBQUVJLDBCQUFPOzs7O0FDSC9DLGVBQXdCLENBQVM7SUFDL0IsTUFBTSxDQUFDLENBQUMsWUFBWSxZQUFZLEdBQUcsQ0FBQyxHQUFHLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzVELENBQUM7QUFGRCxzQkFFQztBQUVELGVBQXdCLENBQU87SUFDN0IsTUFBTSxDQUFDLENBQUMsWUFBWSxVQUFVLEdBQUcsQ0FBQyxHQUFHLElBQUksVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ3hELENBQUM7QUFGRCxzQkFFQztBQUVELGlCQUE2QixDQUFTLEVBQUUsQ0FBVztJQUNqRCxNQUFNLENBQUMsQ0FBQyxJQUFJLElBQUksR0FBRyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUE7QUFDckMsQ0FBQztBQUZELDBCQUVDOzs7O0FDWkQsb0JBQTZCLEdBQVc7SUFDdEMsTUFBTSxDQUFDLElBQUksT0FBTyxDQUFDLFVBQVUsR0FBRyxFQUFFLEdBQUc7UUFDbkMsTUFBTSxHQUFHLEdBQUcsSUFBSSxjQUFjLENBQUE7UUFFOUIsR0FBRyxDQUFDLFlBQVksR0FBRyxhQUFhLENBQUE7UUFDaEMsR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUNuQyxHQUFHLENBQUMsT0FBTyxHQUFHLENBQUMsSUFBSSxHQUFHLENBQUMsa0JBQW1CLEdBQUksRUFBRSxDQUFDLENBQUE7UUFDakQsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUE7UUFDcEIsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFBO0lBQ1osQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDO0FBVkQsZ0NBVUM7QUFFRCxvQkFBNkIsR0FBVztJQUN0QyxNQUFNLENBQUMsSUFBSSxPQUFPLENBQUMsVUFBVSxHQUFHLEVBQUUsR0FBRztRQUNuQyxNQUFNLEdBQUcsR0FBRyxJQUFJLGNBQWMsQ0FBQTtRQUU5QixHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBQ25DLEdBQUcsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxrQkFBbUIsR0FBSSxFQUFFLENBQUMsQ0FBQTtRQUNqRCxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQTtRQUNwQixHQUFHLENBQUMsSUFBSSxFQUFFLENBQUE7SUFDWixDQUFDLENBQUMsQ0FBQTtBQUNKLENBQUM7QUFURCxnQ0FTQztBQUVELG1CQUE0QixHQUFXO0lBQ3JDLE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBQyxVQUFXLEdBQUcsRUFBRSxHQUFHO1FBQ3BDLE1BQU0sQ0FBQyxHQUFHLElBQUksS0FBSyxDQUFBO1FBRW5CLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFBO1FBQ1gsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ3RCLENBQUMsQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFBO0lBQ2pCLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQztBQVJELDhCQVFDOzs7Ozs7Ozs7Ozs7QUMvQkQsaUNBQTBEO0FBRzFELHlDQUEwRDtBQUUxRCxNQUFNLGFBQWEsR0FBRyxDQUFDLENBQUE7QUFnQnZCLGNBQXNCLEVBQXlCOztRQUM3QyxNQUFNLFFBQVEsR0FBRyxpQkFBVSxDQUFDLG1CQUFtQixDQUFDLENBQUE7UUFDaEQsTUFBTSxRQUFRLEdBQUcsaUJBQVUsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO1FBQ2xELE1BQU0sT0FBTyxHQUFHLGdCQUFTLENBQUMsbUJBQW1CLENBQUMsQ0FBQTtRQUM5QyxNQUFNLE9BQU8sR0FBRyxpQkFBVSxDQUFDLGdCQUFnQixDQUFDLENBQUE7UUFDNUMsTUFBTSxDQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBRSxHQUFHLE1BQU0sT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBRSxDQUFDLENBQUE7UUFDbkcsTUFBTSxPQUFPLEdBQUcsa0JBQU8sQ0FBQyxVQUFVLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUVsRCwwQ0FBMEM7UUFDMUMsTUFBTSxhQUFhLEdBQUcsQ0FBQyxDQUFBO1FBQ3ZCLE1BQU0sVUFBVSxHQUFHLEVBQUUsQ0FBQTtRQUNyQixNQUFNLFFBQVEsR0FBRyxDQUFDLENBQUE7UUFDbEIsTUFBTSxXQUFXLEdBQUc7WUFDbEIsVUFBVSxFQUFFLElBQUksWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsYUFBYSxDQUFDO1lBQ3RELE9BQU8sRUFBRSxJQUFJLFlBQVksQ0FBQyxNQUFNLEVBQUUsYUFBYSxHQUFHLGFBQWEsRUFBRSxVQUFVLENBQUM7WUFDNUUsVUFBVSxFQUFFLElBQUksWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDLGFBQWEsR0FBRyxVQUFVLENBQUMsR0FBRyxhQUFhLEVBQUUsUUFBUSxDQUFDO1NBQzdGLENBQUE7UUFDRCxNQUFNLFFBQVEsR0FBRztZQUNmLE9BQU87U0FDUixDQUFBO1FBRUQsTUFBTSxDQUFDLE9BQU8sWUFBWSxLQUFLO2NBQzNCLE9BQU87Y0FDUCxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLENBQUE7SUFDMUQsQ0FBQztDQUFBO0FBRUQsY0FBc0IsRUFBeUI7O1FBQzdDLE1BQU0sU0FBUyxHQUFHLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFBO1FBRWhDLEVBQUUsQ0FBQyxDQUFFLFNBQVMsWUFBWSxLQUFNLENBQUM7WUFBQyxNQUFNLENBQUE7UUFFeEMsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsV0FBVyxFQUFFLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsRUFBRSxRQUFRLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxHQUFHLFNBQVMsQ0FBQTtRQUMzSCxNQUFNLEtBQUssR0FBRztZQUNaLFVBQVUsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxFQUFFLFlBQVksQ0FBQztZQUNqRCxPQUFPLEVBQUUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLENBQUMsRUFBRSxTQUFTLENBQUM7WUFDM0MsVUFBVSxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDO1NBQ2xELENBQUE7UUFDRCxNQUFNLEtBQUssR0FBRztZQUNaLE1BQU0sRUFBRSxFQUFFLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQztZQUMxQyxTQUFTLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixDQUFDLENBQUMsRUFBRSxXQUFXLENBQUM7U0FDakQsQ0FBQTtRQUNELE1BQU0sUUFBUSxHQUFHLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQTtRQUNsQyxNQUFNLGNBQWMsR0FBRyxFQUFFLENBQUMsYUFBYSxFQUFFLENBQUE7UUFFekMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUE7UUFDdkIsRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDcEIsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUV6QixFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ2hCLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsQ0FBQTtRQUN4QyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxZQUFZLENBQUMsQ0FBQTtRQUVsRCxFQUFFLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsY0FBYyxDQUFDLENBQUE7UUFDN0MsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLGFBQWEsRUFBRSxPQUFPLENBQUMsQ0FBQTtRQUM1RSxFQUFFLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNsRSxFQUFFLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixFQUFFLEVBQUUsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1FBQ2pGLEVBQUUsQ0FBQyxjQUFjLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2pDLEVBQUUsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUVwQyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDcEMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUVuQixNQUFNLE1BQU0sR0FBRztZQUNiLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQTtZQUNwQyxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsR0FBRyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsQ0FBQTtZQUNuRCxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBRWhCLFdBQVc7WUFDWCxFQUFFLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQTtZQUM3QixFQUFFLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsY0FBYyxDQUFDLENBQUE7WUFDN0MsRUFBRSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFBLENBQUMsaURBQWlEO1lBQ2xGLEVBQUUsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQTtZQUc3QyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsUUFBUSxDQUFDLENBQUE7WUFDeEMsRUFBRSxDQUFDLHVCQUF1QixDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQTtZQUM1QyxFQUFFLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQTtZQUN0RixFQUFFLENBQUMsdUJBQXVCLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFBO1lBQ3pDLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFBO1lBQ2hGLEVBQUUsQ0FBQyx1QkFBdUIsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUE7WUFDNUMsRUFBRSxDQUFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUE7WUFFdEYsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQTtZQUVyQyxFQUFFLENBQUMsd0JBQXdCLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFBO1lBQzdDLEVBQUUsQ0FBQyx3QkFBd0IsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUE7WUFDMUMsRUFBRSxDQUFDLHdCQUF3QixDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQTtZQUM3QyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLENBQUE7WUFFcEMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQ3BDLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUE7WUFFbkIscUJBQXFCLENBQUMsTUFBTSxDQUFDLENBQUE7UUFDL0IsQ0FBQyxDQUFBO1FBQ0QsTUFBTSxFQUFFLENBQUE7SUFDVixDQUFDO0NBQUE7QUFFRCxNQUFNLENBQUMsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBc0IsQ0FBQTtBQUNoRSxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBMEIsQ0FBQTtBQUV6RCxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IHsgR0wsIFByb2dyYW0gfSBmcm9tICcuL0dMVHlwZXMnXG5cbi8qXG4gIFRIT1VHSFRTIE9OIElOREVYIC8gZHJhd0VsZW1lbnRzIFxuXG4gIEVhY2ggY29tbWFuZCBpcyBlaXRoZXIgcmVuZGVyZXJlZCB3aXRoIGRyYXdFbGVtZW50cyBvciBkcmF3QXJyYXlzXG4gIHRoaXMgc2hvdWxkIGJlIGRldGVybWluZWQgYnkgd2hldGhlciB0aGUgY2ZnIHN1cHBsaWVzIGFuIGluZGV4IGF0dHJpYnV0ZVxuICBmb3IgdGhlIFwiaW5kZXhcIiBwcm9wZXJ0eS4gIEkgdGhpbmsgdGhpcyBpcyBiZXN0IHNlcGFyYXRlZCBmcm9tIGdlbmVyYWxcbiAgYXR0cmlidXRlcyBhcyBpdCBwbGF5cyBhbiBpbXBvcnRhbnQgcm9sZSBpbiBkZXRlcm1pbmluZyBob3cgdGhlIGNvbW1hbmRcbiAgd2lsbCBiZSB1c2VkLiAgRnVydGhlcm1vcmUsIGl0IGFsc28gc2VlbXMgdGhhdCB0aGVyZSBpcyBubyBuZWVkIGZvciB1c2VyXG4gIGN1c3RvbWl6YXRpb24gZm9yIHRoaXMgcHJvcGVydHkuICBJZiB0aGV5IHN1cHBseSBhbiBJbnQxNkFycmF5IGZvciB0aGUgXG4gIGluZGV4IHByb3BlcnR5LCB0aGVuIHRoZSBjb21tYW5kIHdpbGwgZXhlY3V0ZSB3aXRoIGRyYXdFbGVtZW50c1xuICBhbmQgbm90IGRyYXdBcnJheXNcbiovXG5cbmV4cG9ydCB0eXBlIEF0dHJpYnV0ZVNpemUgPSAxIHwgMiB8IDMgfCA0XG5leHBvcnQgZW51bSBCdWZmZXJUeXBlIHsgQllURSwgVU5TSUdORURfQllURSwgU0hPUlQsIFVOU0lHTkVEX1NIT1JULCBGTE9BVCB9XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXR0cmlidXRlQ2ZnPFQ+IHsgXG4gIHZhbHVlOiBUXG4gIHJlYWRvbmx5IGJ1ZmZlclR5cGU6IEJ1ZmZlclR5cGVcbiAgc2l6ZTogQXR0cmlidXRlU2l6ZVxuICBvZmZzZXQ/OiBudW1iZXJcbiAgc3RyaWRlPzogbnVtYmVyXG4gIHNldHVwKCBnbDogR0wsIGE6IEF0dHJpYnV0ZTxUPiApOiB2b2lkXG4gIHNldCggZ2w6IEdMLCBhOiBBdHRyaWJ1dGU8VD4sIHQ6IFQgKTogdm9pZFxuICB0ZWFyZG93biggZ2w6IEdMLCBhOiBBdHRyaWJ1dGU8VD4gKTogdm9pZFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEF0dHJpYnV0ZTxUPiBleHRlbmRzIEF0dHJpYnV0ZUNmZzxUPiB7XG4gIGxvYzogbnVtYmVyXG4gIGJ1ZmZlcjogV2ViR0xCdWZmZXJcbn1cblxuZXhwb3J0IHR5cGUgQXR0cmlidXRlQ2ZnczxUPiA9IHsgWyBQIGluIGtleW9mIFQgXTogQXR0cmlidXRlQ2ZnPFRbUF0+IH1cbmV4cG9ydCB0eXBlIEF0dHJpYnV0ZXM8VD4gPSB7IFsgUCBpbiBrZXlvZiBUIF06IEF0dHJpYnV0ZTxUW1BdPiB9XG5cbmV4cG9ydCBjbGFzcyBGbG9hdHMgaW1wbGVtZW50cyBBdHRyaWJ1dGVDZmc8RmxvYXQzMkFycmF5PiB7XG4gIG9mZnNldCA9IDBcbiAgc3RyaWRlID0gMFxuICByZWFkb25seSBidWZmZXJUeXBlID0gQnVmZmVyVHlwZS5GTE9BVFxuICBjb25zdHJ1Y3RvciggcHVibGljIHNpemU6IEF0dHJpYnV0ZVNpemUsIHB1YmxpYyB2YWx1ZTogRmxvYXQzMkFycmF5ICkge31cbiAgc2V0dXAoZ2w6IEdMLCBhOiBBdHRyaWJ1dGU8RmxvYXQzMkFycmF5PiApIHtcbiAgICBjb25zdCB7IGxvYywgc2l6ZSwgYnVmZmVyVHlwZSwgYnVmZmVyLCBzdHJpZGUgPSAwLCBvZmZzZXQgPSAwIH0gPSBhXG5cbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgYnVmZmVyKVxuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGEubG9jKVxuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIobG9jLCBzaXplLCB0b0dMVHlwZShnbCwgYnVmZmVyVHlwZSksIGZhbHNlLCBzdHJpZGUsIG9mZnNldClcbiAgfVxuICBzZXQoIGdsOiBHTCwgYTogQXR0cmlidXRlPEZsb2F0MzJBcnJheT4sIHZhbHVlOiBGbG9hdDMyQXJyYXkgKSB7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHZhbHVlLCBnbC5EWU5BTUlDX0RSQVcpXG4gIH1cbiAgdGVhcmRvd24oZ2w6IEdMLCBhOiBBdHRyaWJ1dGU8RmxvYXQzMkFycmF5PiApIHtcbiAgICBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoYS5sb2MpIFxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBudWxsKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cEF0dHJpYnV0ZTxUPiAoIGdsOiBHTCwgcHJvZ3JhbTogUHJvZ3JhbSwgbmFtZTogc3RyaW5nLCBhY2ZnOiBBdHRyaWJ1dGVDZmc8VD4gKTogQXR0cmlidXRlPFQ+IHwgRXJyb3Ige1xuICBjb25zdCB7IHZhbHVlLCBidWZmZXJUeXBlLCBzaXplLCBzZXQsIHNldHVwLCB0ZWFyZG93biwgb2Zmc2V0ID0gMCwgc3RyaWRlID0gMCB9ID0gYWNmZ1xuICBjb25zdCBsb2MgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBuYW1lKVxuICBjb25zdCBidWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKVxuXG4gIGlmICggbG9jID09IG51bGwgKSAgICByZXR1cm4gbmV3IEVycm9yKGBDb3VsZCBub3QgbG9jYXRlIGF0dHI6ICR7IG5hbWUgfWApXG4gIGlmICggYnVmZmVyID09IG51bGwgKSByZXR1cm4gbmV3IEVycm9yKGBDb3VsZCBub3QgY3JlYXRlIGJ1ZmZlciBmb3IgYXR0cjogJHsgbmFtZSB9YClcblxuICBjb25zdCBhID0geyB2YWx1ZSwgYnVmZmVyVHlwZSwgc2l6ZSwgb2Zmc2V0LCBzdHJpZGUsIGxvYywgYnVmZmVyLCBzZXQsIHNldHVwLCB0ZWFyZG93biB9XG5cbiAgc2V0dXAoZ2wsIGEpXG4gIHNldChnbCwgYSwgdmFsdWUpXG4gIHRlYXJkb3duKGdsLCBhKVxuICByZXR1cm4gYVxufVxuXG5mdW5jdGlvbiB0b0dMVHlwZSAoIGdsOiBHTCwgYnVmZmVyVHlwZTogQnVmZmVyVHlwZSApOiBudW1iZXIge1xuICBzd2l0Y2ggKCBidWZmZXJUeXBlICkge1xuICAgIGNhc2UgQnVmZmVyVHlwZS5GTE9BVDogICAgICAgICAgcmV0dXJuIGdsLkZMT0FUXG4gICAgY2FzZSBCdWZmZXJUeXBlLlNIT1JUOiAgICAgICAgICByZXR1cm4gZ2wuU0hPUlRcbiAgICBjYXNlIEJ1ZmZlclR5cGUuQllURTogICAgICAgICAgIHJldHVybiBnbC5CWVRFXG4gICAgY2FzZSBCdWZmZXJUeXBlLlVOU0lHTkVEX1NIT1JUOiByZXR1cm4gZ2wuVU5TSUdORURfU0hPUlRcbiAgICBjYXNlIEJ1ZmZlclR5cGUuVU5TSUdORURfQllURTogIHJldHVybiBnbC5VTlNJR05FRF9CWVRFXG4gICAgZGVmYXVsdDogY29uc3QgbjogbmV2ZXIgPSBidWZmZXJUeXBlXG4gICAgICAgICAgICAgcmV0dXJuIG5cbiAgfVxufVxuIiwiaW1wb3J0IHsgR0wsIFByb2dyYW0sIFNoYWRlciwgU2hhZGVyU3JjIH0gZnJvbSAnLi9HTFR5cGVzJ1xuaW1wb3J0IHsgVW5pZm9ybUNmZ3MsIFVuaWZvcm1zLCBzZXR1cFVuaWZvcm0gfSBmcm9tICcuL1VuaWZvcm1zJ1xuaW1wb3J0IHsgQXR0cmlidXRlQ2ZncywgQXR0cmlidXRlcywgc2V0dXBBdHRyaWJ1dGUgfSBmcm9tICcuL0F0dHJpYnV0ZXMnXG5pbXBvcnQgeyB0b0Vycm9yIH0gZnJvbSAnLi91dGlscydcblxuZXhwb3J0IGludGVyZmFjZSBDb21tYW5kQ2ZnPFUsIEE+IHtcbiAgdnNyYzogc3RyaW5nXG4gIGZzcmM6IHN0cmluZ1xuICB1bmlmb3JtczogVW5pZm9ybUNmZ3M8VT5cbiAgYXR0cmlidXRlczogQXR0cmlidXRlQ2ZnczxBPlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbW1hbmQ8VSwgQT4ge1xuICBnbDogR0xcbiAgcHJvZ3JhbTogUHJvZ3JhbVxuICB1bmlmb3JtczogVW5pZm9ybXM8VT5cbiAgYXR0cmlidXRlczogQXR0cmlidXRlczxBPlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcmFtczxVLCBBPiB7XG4gIHVuaWZvcm1zPzogUGFydGlhbDxVPlxuICBhdHRyaWJ1dGVzPzogUGFydGlhbDxBPiBcbiAgY291bnQ6IG51bWJlclxufVxuXG5leHBvcnQgZnVuY3Rpb24gcnVuPFUsIEE+ICggY21kOiBDb21tYW5kPFUsIEE+LCBwOiBQYXJhbXM8VSwgQT4gKSB7XG4gIGNvbnN0IHsgZ2wsIHByb2dyYW0gfSA9IGNtZFxuICBjb25zdCB7IGF0dHJpYnV0ZXMsIHVuaWZvcm1zLCBjb3VudCB9ID0gcFxuXG4gIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSlcblxuICBmb3IgKCBjb25zdCBrZXkgaW4gY21kLnVuaWZvcm1zICkge1xuICAgIGNvbnN0IHsgbG9jLCB2YWx1ZSwgc2V0IH0gPSBjbWQudW5pZm9ybXNba2V5XVxuICAgIGNvbnN0IHZhbCA9IHVuaWZvcm1zICYmIHVuaWZvcm1zW2tleV0gfHwgdmFsdWVcblxuICAgIHNldChnbCwgbG9jLCB2YWwpXG4gIH1cblxuICBmb3IgKCBjb25zdCBrZXkgaW4gY21kLmF0dHJpYnV0ZXMgKSB7XG4gICAgY29uc3QgYSA9IGNtZC5hdHRyaWJ1dGVzW2tleV1cbiAgICBjb25zdCB2YWwgPSBhdHRyaWJ1dGVzICYmIGF0dHJpYnV0ZXNba2V5XVxuXG4gICAgYS5zZXR1cChnbCwgYSlcbiAgICBpZiAoIHZhbCAhPSBudWxsICkgYS5zZXQoZ2wsIGEsIHZhbClcbiAgfVxuXG4gIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVTLCAwLCBjb3VudClcblxuICBmb3IgKCBjb25zdCBrZXkgaW4gY21kLmF0dHJpYnV0ZXMgKSB7XG4gICAgY29uc3QgYSA9IGNtZC5hdHRyaWJ1dGVzW2tleV1cblxuICAgIGEudGVhcmRvd24oZ2wsIGEpXG4gIH1cblxuICBnbC51c2VQcm9ncmFtKG51bGwpXG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNvbW1hbmQ8VSwgQT4gKCBnbDogR0wsIGNmZzogQ29tbWFuZENmZzxVLCBBPiApOiBDb21tYW5kPFUsIEE+IHwgRXJyb3Ige1xuICBjb25zdCBwcm9ncmFtID0gZnJvbVNvdXJjZShnbCwgY2ZnLnZzcmMsIGNmZy5mc3JjKVxuXG4gIGlmICggcHJvZ3JhbSBpbnN0YW5jZW9mIEVycm9yICkgcmV0dXJuIHByb2dyYW1cblxuICBjb25zdCB1bmlmb3JtcyA9IHNldHVwVW5pZm9ybXMoZ2wsIHByb2dyYW0sIGNmZy51bmlmb3JtcylcblxuICBpZiAoIHVuaWZvcm1zIGluc3RhbmNlb2YgRXJyb3IgKSB1bmlmb3Jtc1xuXG4gIGNvbnN0IGF0dHJpYnV0ZXMgPSBzZXR1cEF0dHJpYnV0ZXMoZ2wsIHByb2dyYW0sIGNmZy5hdHRyaWJ1dGVzKVxuXG4gIGlmICggYXR0cmlidXRlcyBpbnN0YW5jZW9mIEVycm9yICkgcmV0dXJuIGF0dHJpYnV0ZXNcblxuICByZXR1cm4geyBnbCwgcHJvZ3JhbSwgdW5pZm9ybXMsIGF0dHJpYnV0ZXMgfSBhcyBDb21tYW5kPFUsIEE+XG59XG5cbmZ1bmN0aW9uIHNldHVwVW5pZm9ybXM8VD4gKCBnbDogR0wsIHByb2dyYW06IFByb2dyYW0sIHVjZmdzOiBVbmlmb3JtQ2ZnczxUPiApOiBVbmlmb3JtczxUPiB8IEVycm9yIHtcbiAgY29uc3Qgb3V0ID0ge30gYXMgVW5pZm9ybXM8VD5cblxuICBnbC51c2VQcm9ncmFtKHByb2dyYW0pXG4gIGZvciAoIGNvbnN0IGtleSBpbiB1Y2ZncyApIHtcbiAgICBjb25zdCB1bmlmb3JtID0gc2V0dXBVbmlmb3JtKGdsLCBwcm9ncmFtLCBrZXksIHVjZmdzW2tleV0pXG5cbiAgICBpZiAoIHVuaWZvcm0gaW5zdGFuY2VvZiBFcnJvciApIHJldHVybiB1bmlmb3JtXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRba2V5XSA9IHVuaWZvcm1cbiAgfVxuICBnbC51c2VQcm9ncmFtKG51bGwpXG4gIHJldHVybiBvdXRcbn1cblxuZnVuY3Rpb24gc2V0dXBBdHRyaWJ1dGVzPFQ+ICggZ2w6IEdMLCBwcm9ncmFtOiBQcm9ncmFtLCB1YXR0cnM6IEF0dHJpYnV0ZUNmZ3M8VD4gKTogQXR0cmlidXRlczxUPiB8IEVycm9yIHtcbiAgY29uc3Qgb3V0ID0ge30gYXMgQXR0cmlidXRlczxUPlxuXG4gIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSlcbiAgZm9yICggY29uc3Qga2V5IGluIHVhdHRycyApIHtcbiAgICBjb25zdCBhdHRyID0gc2V0dXBBdHRyaWJ1dGUoZ2wsIHByb2dyYW0sIGtleSwgdWF0dHJzW2tleV0pXG5cbiAgICBpZiAoIGF0dHIgaW5zdGFuY2VvZiBFcnJvciApIHJldHVybiBhdHRyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICBvdXRba2V5XSA9IGF0dHJcbiAgfVxuICBnbC51c2VQcm9ncmFtKG51bGwpXG4gIHJldHVybiBvdXQgXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21waWxlU2hhZGVyICggZ2w6IEdMLCBraW5kOiBudW1iZXIsIHNyYzogU2hhZGVyU3JjICk6IFNoYWRlciB8IEVycm9yIHtcbiAgY29uc3Qgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKGtpbmQpXG4gIGNvbnN0IGtpbmRTdHIgPSBraW5kID09PSBnbC5WRVJURVhfU0hBREVSID8gJ1ZFUlRFWCcgOiAnRlJBR01FTlQnXG5cbiAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc3JjKVxuICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcilcbiAgcmV0dXJuIHNoYWRlciAmJiBnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUylcbiAgICA/IHNoYWRlclxuICAgIDogbmV3IEVycm9yKGAkeyBraW5kU3RyIH06ICR7IGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSB8fCAnJyB9YClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Tb3VyY2UgKCBnbDogR0wsIHZzcmM6IFNoYWRlclNyYywgZnNyYzogU2hhZGVyU3JjICk6IFByb2dyYW0gfCBFcnJvciB7XG4gIGNvbnN0IHZlcnRleCA9IGNvbXBpbGVTaGFkZXIoZ2wsIGdsLlZFUlRFWF9TSEFERVIsIHZzcmMpXG4gIGNvbnN0IGZyYWdtZW50ID0gY29tcGlsZVNoYWRlcihnbCwgZ2wuRlJBR01FTlRfU0hBREVSLCBmc3JjKVxuICBjb25zdCBwcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpXG5cbiAgaWYgKCB2ZXJ0ZXggaW5zdGFuY2VvZiBFcnJvciApIHJldHVybiB2ZXJ0ZXhcbiAgaWYgKCBmcmFnbWVudCBpbnN0YW5jZW9mIEVycm9yICkgcmV0dXJuIGZyYWdtZW50XG5cbiAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZlcnRleClcbiAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZyYWdtZW50KVxuICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKVxuXG4gIHJldHVybiBwcm9ncmFtICYmIGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpIFxuICAgID8gcHJvZ3JhbSBcbiAgICA6IG5ldyBFcnJvcihnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKSB8fCAnJylcbn1cbiIsImltcG9ydCB7IEdMLCBQcm9ncmFtLCBMb2MsIEZsb2F0cywgSW50cyB9IGZyb20gJy4vR0xUeXBlcydcbmltcG9ydCB7IGFzRjMyLCBhc0kzMiB9IGZyb20gJy4vdXRpbHMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgVW5pZm9ybUNmZzxUPiB7IFxuICB2YWx1ZTogVFxuICBzZXQoIGdsOiBHTCwgaDogV2ViR0xVbmlmb3JtTG9jYXRpb24sIHQ6IFQpOiB2b2lkXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVW5pZm9ybTxUPiBleHRlbmRzIFVuaWZvcm1DZmc8VD4geyBcbiAgbG9jOiBXZWJHTFVuaWZvcm1Mb2NhdGlvblxufVxuXG5leHBvcnQgdHlwZSBVbmlmb3JtQ2ZnczxUPiA9IHsgWyBQIGluIGtleW9mIFQgXTogVW5pZm9ybUNmZzxUW1BdPiB9XG5leHBvcnQgdHlwZSBVbmlmb3JtczxUPiA9IHsgWyBQIGluIGtleW9mIFQgXTogVW5pZm9ybTxUW1BdPiB9XG5cbmV4cG9ydCBjbGFzcyBVRiBpbXBsZW1lbnRzIFVuaWZvcm1DZmc8bnVtYmVyPiB7XG4gIGNvbnN0cnVjdG9yKCBwdWJsaWMgdmFsdWU6IG51bWJlciApIHt9XG4gIHNldCggZ2w6IEdMLCBoOiBMb2MsIHQ6IG51bWJlciApIHsgZ2wudW5pZm9ybTFmKGgsIHQpIH1cbn1cblxuZXhwb3J0IGNsYXNzIFUyRiBpbXBsZW1lbnRzIFVuaWZvcm1DZmc8RmxvYXRzPiB7XG4gIGNvbnN0cnVjdG9yKCBwdWJsaWMgdmFsdWU6IEZsb2F0cyApIHt9XG4gIHNldCggZ2w6IEdMLCBoOiBMb2MsIHQ6IEZsb2F0cyApIHsgZ2wudW5pZm9ybTJmKGgsIHRbMF0sIHRbMV0pIH1cbn1cblxuZXhwb3J0IGNsYXNzIFUzRiBpbXBsZW1lbnRzIFVuaWZvcm1DZmc8RmxvYXRzPiB7XG4gIGNvbnN0cnVjdG9yKCBwdWJsaWMgdmFsdWU6IEZsb2F0cyApIHt9XG4gIHNldCggZ2w6IEdMLCBoOiBMb2MsIHQ6IEZsb2F0cyApIHsgZ2wudW5pZm9ybTNmKGgsIHRbMF0sIHRbMV0sIHRbMl0pIH1cbn1cblxuZXhwb3J0IGNsYXNzIFU0RiBpbXBsZW1lbnRzIFVuaWZvcm1DZmc8RmxvYXRzPiB7XG4gIGNvbnN0cnVjdG9yKCBwdWJsaWMgdmFsdWU6IEZsb2F0cyApIHt9XG4gIHNldCggZ2w6IEdMLCBoOiBMb2MsIHQ6IEZsb2F0cyApIHsgZ2wudW5pZm9ybTRmKGgsIHRbMF0sIHRbMV0sIHRbMl0sIHRbM10pIH1cbn1cblxuZXhwb3J0IGNsYXNzIFVJIGltcGxlbWVudHMgVW5pZm9ybUNmZzxudW1iZXI+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogbnVtYmVyICkge31cbiAgc2V0KCBnbDogR0wsIGg6IExvYywgdDogbnVtYmVyICkgeyBnbC51bmlmb3JtMWkoaCwgdCkgfVxufVxuXG5leHBvcnQgY2xhc3MgVTJJIGltcGxlbWVudHMgVW5pZm9ybUNmZzxJbnRzPiB7XG4gIGNvbnN0cnVjdG9yKCBwdWJsaWMgdmFsdWU6IEludHMgKSB7fVxuICBzZXQoIGdsOiBHTCwgaDogTG9jLCB0OiBJbnRzICkgeyBnbC51bmlmb3JtMmkoaCwgdFswXSwgdFsxXSkgfVxufVxuXG5leHBvcnQgY2xhc3MgVTNJIGltcGxlbWVudHMgVW5pZm9ybUNmZzxJbnRzPiB7XG4gIGNvbnN0cnVjdG9yKCBwdWJsaWMgdmFsdWU6IEludHMgKSB7fVxuICBzZXQoIGdsOiBHTCwgaDogTG9jLCB0OiBJbnRzICkgeyBnbC51bmlmb3JtM2koaCwgdFswXSwgdFsxXSwgdFsyXSkgfVxufVxuXG5leHBvcnQgY2xhc3MgVTRJIGltcGxlbWVudHMgVW5pZm9ybUNmZzxJbnRzPiB7XG4gIGNvbnN0cnVjdG9yKCBwdWJsaWMgdmFsdWU6IEludHMgKSB7fVxuICBzZXQoIGdsOiBHTCwgaDogTG9jLCB0OiBJbnRzICkgeyBnbC51bmlmb3JtNGkoaCwgdFswXSwgdFsxXSwgdFsyXSwgdFszXSkgfVxufVxuXG5leHBvcnQgY2xhc3MgVUZWIGltcGxlbWVudHMgVW5pZm9ybUNmZzxGbG9hdHM+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogRmxvYXRzICkge31cbiAgc2V0KCBnbDogR0wsIGg6IExvYywgdDogRmxvYXRzICkgeyBnbC51bmlmb3JtMWZ2KGgsIGFzRjMyKHQpKSB9XG59XG5cbmV4cG9ydCBjbGFzcyBVMkZWIGltcGxlbWVudHMgVW5pZm9ybUNmZzxGbG9hdHM+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogRmxvYXRzICkge31cbiAgc2V0KCBnbDogR0wsIGg6IExvYywgdDogRmxvYXRzICkgeyBnbC51bmlmb3JtMmZ2KGgsIGFzRjMyKHQpKSB9XG59XG5cbmV4cG9ydCBjbGFzcyBVM0ZWIGltcGxlbWVudHMgVW5pZm9ybUNmZzxGbG9hdHM+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogRmxvYXRzICkge31cbiAgc2V0KCBnbDogR0wsIGg6IExvYywgdDogRmxvYXRzICkgeyBnbC51bmlmb3JtM2Z2KGgsIGFzRjMyKHQpKSB9XG59XG5cbmV4cG9ydCBjbGFzcyBVNEZWIGltcGxlbWVudHMgVW5pZm9ybUNmZzxGbG9hdHM+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogRmxvYXRzICkge31cbiAgc2V0KCBnbDogR0wsIGg6IExvYywgdDogRmxvYXRzICkgeyBnbC51bmlmb3JtNGZ2KGgsIGFzRjMyKHQpKSB9XG59XG5cbmV4cG9ydCBjbGFzcyBVSVYgaW1wbGVtZW50cyBVbmlmb3JtQ2ZnPEludHM+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogSW50cyApIHt9XG4gIHNldCggZ2w6IEdMLCBoOiBMb2MsIHQ6IEludHMgKSB7IGdsLnVuaWZvcm0xaXYoaCwgYXNJMzIodCkpIH1cbn1cblxuZXhwb3J0IGNsYXNzIFUySVYgaW1wbGVtZW50cyBVbmlmb3JtQ2ZnPEludHM+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogSW50cyApIHt9XG4gIHNldCggZ2w6IEdMLCBoOiBMb2MsIHQ6IEludHMgKSB7IGdsLnVuaWZvcm0yaXYoaCwgYXNJMzIodCkpIH1cbn1cblxuZXhwb3J0IGNsYXNzIFUzSVYgaW1wbGVtZW50cyBVbmlmb3JtQ2ZnPEludHM+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogSW50cyApIHt9XG4gIHNldCggZ2w6IEdMLCBoOiBMb2MsIHQ6IEludHMgKSB7IGdsLnVuaWZvcm0zaXYoaCwgYXNJMzIodCkpIH1cbn1cblxuZXhwb3J0IGNsYXNzIFU0SVYgaW1wbGVtZW50cyBVbmlmb3JtQ2ZnPEludHM+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogSW50cyApIHt9XG4gIHNldCggZ2w6IEdMLCBoOiBMb2MsIHQ6IEludHMgKSB7IGdsLnVuaWZvcm00aXYoaCwgYXNJMzIodCkpIH1cbn1cblxuZXhwb3J0IGNsYXNzIFVNYXRyaXgyIGltcGxlbWVudHMgVW5pZm9ybUNmZzxGbG9hdHM+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogRmxvYXRzICkge31cbiAgc2V0KCBnbDogR0wsIGg6IExvYywgdDogRmxvYXRzICkgeyBnbC51bmlmb3JtTWF0cml4MmZ2KGgsIGZhbHNlLCBhc0YzMih0KSkgfVxufVxuXG5leHBvcnQgY2xhc3MgVU1hdHJpeDMgaW1wbGVtZW50cyBVbmlmb3JtQ2ZnPEZsb2F0cz4ge1xuICBjb25zdHJ1Y3RvciggcHVibGljIHZhbHVlOiBGbG9hdHMgKSB7fVxuICBzZXQoIGdsOiBHTCwgaDogTG9jLCB0OiBGbG9hdHMgKSB7IGdsLnVuaWZvcm1NYXRyaXgzZnYoaCwgZmFsc2UsIGFzRjMyKHQpKSB9XG59XG5cbmV4cG9ydCBjbGFzcyBVTWF0cml4NCBpbXBsZW1lbnRzIFVuaWZvcm1DZmc8RmxvYXRzPiB7XG4gIGNvbnN0cnVjdG9yKCBwdWJsaWMgdmFsdWU6IEZsb2F0cyApIHt9XG4gIHNldCggZ2w6IEdMLCBoOiBMb2MsIHQ6IEZsb2F0cyApIHsgZ2wudW5pZm9ybU1hdHJpeDRmdihoLCBmYWxzZSwgYXNGMzIodCkpIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwVW5pZm9ybTxUPiAoIGdsOiBHTCwgcHJvZ3JhbTogUHJvZ3JhbSwgbmFtZTogc3RyaW5nLCB1Y2ZnOiBVbmlmb3JtQ2ZnPFQ+ICk6IFVuaWZvcm08VD4gfCBFcnJvciB7XG4gIGNvbnN0IHsgdmFsdWUsIHNldCB9ID0gdWNmZ1xuICBjb25zdCBsb2MgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgbmFtZSlcblxuICBpZiAoIGxvYyA9PSBudWxsICkgcmV0dXJuIG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgdW5pZm9ybSAkeyBuYW1lIH1gKVxuICBlbHNlICAgICAgICAgICAgICAgcmV0dXJuIChzZXQoZ2wsIGxvYywgdmFsdWUpLCB7IHZhbHVlLCBzZXQsIGxvYyB9KVxufVxuIiwiaW1wb3J0ICogYXMgQXR0cmlidXRlcyBmcm9tICcuL0F0dHJpYnV0ZXMnXG5pbXBvcnQgKiBhcyBVbmlmb3JtcyBmcm9tICcuL1VuaWZvcm1zJ1xuaW1wb3J0ICogYXMgQ29tbWFuZCBmcm9tICcuL0NvbW1hbmQnXG5pbXBvcnQgKiBhcyBHTFR5cGVzIGZyb20gJy4vR0xUeXBlcydcblxuZXhwb3J0IHsgQXR0cmlidXRlcywgVW5pZm9ybXMsIENvbW1hbmQsIEdMVHlwZXMgfVxuIiwiaW1wb3J0IHsgRmxvYXRzLCBJbnRzIH0gZnJvbSAnLi9HTFR5cGVzJ1xuXG5leHBvcnQgZnVuY3Rpb24gYXNGMzIgKCB0OiBGbG9hdHMgKTogRmxvYXQzMkFycmF5IHtcbiAgcmV0dXJuIHQgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkgPyB0IDogbmV3IEZsb2F0MzJBcnJheSh0KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNJMzIgKCB0OiBJbnRzICk6IEludDMyQXJyYXkge1xuICByZXR1cm4gdCBpbnN0YW5jZW9mIEludDMyQXJyYXkgPyB0IDogbmV3IEludDMyQXJyYXkodClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvRXJyb3I8VD4gKCBzOiBzdHJpbmcsIHY6IFQgfCBudWxsICk6IFQgfCBFcnJvciB7XG4gIHJldHVybiB2ID09IG51bGwgPyBuZXcgRXJyb3IocykgOiB2XG59XG5cbiIsImV4cG9ydCBmdW5jdGlvbiBsb2FkQmluYXJ5ICggdXJpOiBzdHJpbmcgKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7XG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0XG5cbiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJ1xuICAgIHhoci5vbmxvYWQgPSBfID0+IHJlcyh4aHIucmVzcG9uc2UpXG4gICAgeGhyLm9uZXJyb3IgPSBfID0+IHJlaihgQ291bGQgbm90IGxvYWQgJHsgdXJpIH1gKVxuICAgIHhoci5vcGVuKCdHRVQnLCB1cmkpXG4gICAgeGhyLnNlbmQoKVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9hZFN0cmluZyAoIHVyaTogc3RyaW5nICk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzLCByZWopIHtcbiAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3RcblxuICAgIHhoci5vbmxvYWQgPSBfID0+IHJlcyh4aHIucmVzcG9uc2UpXG4gICAgeGhyLm9uZXJyb3IgPSBfID0+IHJlaihgQ291bGQgbm90IGxvYWQgJHsgdXJpIH1gKVxuICAgIHhoci5vcGVuKCdHRVQnLCB1cmkpXG4gICAgeGhyLnNlbmQoKVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9hZEltYWdlICggdXJpOiBzdHJpbmcgKTogUHJvbWlzZTxIVE1MSW1hZ2VFbGVtZW50PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoIHJlcywgcmVqICkge1xuICAgIGNvbnN0IGkgPSBuZXcgSW1hZ2VcblxuICAgIGkuc3JjID0gdXJpXG4gICAgaS5vbmxvYWQgPSBfID0+IHJlcyhpKVxuICAgIGkub25lcnJvciA9IHJlalxuICB9KVxufVxuIiwiaW1wb3J0IHsgbG9hZFN0cmluZywgbG9hZEJpbmFyeSwgbG9hZEltYWdlIH0gZnJvbSAnLi9Mb2FkJ1xuaW1wb3J0IHsgcGFyc2VPQkogfSBmcm9tICcuL1BhcnNlcnMvT0JKJ1xuaW1wb3J0IHsgVjMsIE00LCBpZGVudGl0eSwgdHJhbnNsYXRlLCByb3RhdGVYLCByb3RhdGVZLCByb3RhdGVaLCBzY2FsZSwgbG9va0F0LCBwZXJzcGVjdGl2ZSB9IGZyb20gJy4vTWF0cml4J1xuaW1wb3J0IHsgQXR0cmlidXRlcywgVW5pZm9ybXMsIENvbW1hbmQgfSBmcm9tICcuL0NvbW1hbmRvJ1xuXG5jb25zdCBGMzJfQllURV9TSVpFID0gNFxuXG5pbnRlcmZhY2UgU2NlbmUge1xuICBjb3VudDogbnVtYmVyXG4gIHByb2dyYW06IFdlYkdMUHJvZ3JhbVxuICBidWZmZXI6IEFycmF5QnVmZmVyXG4gIGJ1ZmZlclZpZXdzOiB7XG4gICAgYV9wb3NpdGlvbjogQXJyYXlCdWZmZXJWaWV3XG4gICAgYV9jb2xvcjogQXJyYXlCdWZmZXJWaWV3XG4gICAgYV90ZXhDb29yZDogQXJyYXlCdWZmZXJWaWV3XG4gIH1cbiAgdGV4dHVyZXM6IHtcbiAgICBkaWZmdXNlOiBIVE1MSW1hZ2VFbGVtZW50IFxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxvYWQgKCBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0ICk6IFByb21pc2U8U2NlbmUgfCBFcnJvcj4ge1xuICBjb25zdCBsb2FkVmVydCA9IGxvYWRTdHJpbmcoJ2JyaWNrL3ZlcnRleC5nbHNsJylcbiAgY29uc3QgbG9hZEZyYWcgPSBsb2FkU3RyaW5nKCdicmljay9mcmFnbWVudC5nbHNsJylcbiAgY29uc3QgbG9hZFRleCA9IGxvYWRJbWFnZSgnYnJpY2svZGlmZnVzZS5qcGcnKVxuICBjb25zdCBsb2FkQnVmID0gbG9hZEJpbmFyeSgnYnJpY2svZGF0YS5iaW4nKVxuICBjb25zdCBbIHZzcmMsIGZzcmMsIGRpZmZ1c2UsIGJ1ZmZlciBdID0gYXdhaXQgUHJvbWlzZS5hbGwoWyBsb2FkVmVydCwgbG9hZEZyYWcsIGxvYWRUZXgsIGxvYWRCdWYgXSlcbiAgY29uc3QgcHJvZ3JhbSA9IENvbW1hbmQuZnJvbVNvdXJjZShnbCwgdnNyYywgZnNyYylcblxuICAvLyBUaGlzIGRhdGEgd291bGQgY29tZSBmcm9tIGEgc2NoZW1hIGZpbGVcbiAgY29uc3QgcG9zaXRpb25Db3VudCA9IDlcbiAgY29uc3QgY29sb3JDb3VudCA9IDEyXG4gIGNvbnN0IHRleENvdW50ID0gNlxuICBjb25zdCBidWZmZXJWaWV3cyA9IHtcbiAgICBhX3Bvc2l0aW9uOiBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlciwgMCwgcG9zaXRpb25Db3VudCksXG4gICAgYV9jb2xvcjogbmV3IEZsb2F0MzJBcnJheShidWZmZXIsIHBvc2l0aW9uQ291bnQgKiBGMzJfQllURV9TSVpFLCBjb2xvckNvdW50KSxcbiAgICBhX3RleENvb3JkOiBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlciwgKHBvc2l0aW9uQ291bnQgKyBjb2xvckNvdW50KSAqIEYzMl9CWVRFX1NJWkUsIHRleENvdW50KVxuICB9XG4gIGNvbnN0IHRleHR1cmVzID0ge1xuICAgIGRpZmZ1c2UgXG4gIH1cblxuICByZXR1cm4gcHJvZ3JhbSBpbnN0YW5jZW9mIEVycm9yIFxuICAgID8gcHJvZ3JhbVxuICAgIDogeyBjb3VudDogMywgcHJvZ3JhbSwgYnVmZmVyLCBidWZmZXJWaWV3cywgdGV4dHVyZXMgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBtYWluICggZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCApIHsgXG4gIGNvbnN0IHNjZW5lRGF0YSA9IGF3YWl0IGxvYWQoZ2wpXG5cbiAgaWYgKCBzY2VuZURhdGEgaW5zdGFuY2VvZiBFcnJvciApIHJldHVyblxuXG4gIGNvbnN0IHsgY291bnQsIGJ1ZmZlcjogYiwgcHJvZ3JhbTogcCwgYnVmZmVyVmlld3M6IHsgYV9wb3NpdGlvbiwgYV9jb2xvciwgYV90ZXhDb29yZCB9LCB0ZXh0dXJlczogeyBkaWZmdXNlIH0gfSA9IHNjZW5lRGF0YVxuICBjb25zdCBhX2xvYyA9IHtcbiAgICBhX3Bvc2l0aW9uOiBnbC5nZXRBdHRyaWJMb2NhdGlvbihwLCAnYV9wb3NpdGlvbicpLFxuICAgIGFfY29sb3I6IGdsLmdldEF0dHJpYkxvY2F0aW9uKHAsICdhX2NvbG9yJyksXG4gICAgYV90ZXhDb29yZDogZ2wuZ2V0QXR0cmliTG9jYXRpb24ocCwgJ2FfdGV4Q29vcmQnKVxuICB9XG4gIGNvbnN0IHVfbG9jID0ge1xuICAgIHVfdGltZTogZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHAsICd1X3RpbWUnKSxcbiAgICB1X2RpZmZ1c2U6IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwLCAndV9kaWZmdXNlJylcbiAgfVxuICBjb25zdCBnbEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpXG4gIGNvbnN0IHRleHR1cmVEaWZmdXNlID0gZ2wuY3JlYXRlVGV4dHVyZSgpXG5cbiAgZ2wuZW5hYmxlKGdsLkNVTExfRkFDRSlcbiAgZ2wuY3VsbEZhY2UoZ2wuQkFDSylcbiAgZ2wuY2xlYXJDb2xvcigwLCAwLCAwLCAwKVxuXG4gIGdsLnVzZVByb2dyYW0ocClcbiAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGdsQnVmZmVyKVxuICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgYiwgZ2wuRFlOQU1JQ19EUkFXKVxuXG4gIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmVEaWZmdXNlKVxuICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIGRpZmZ1c2UpXG4gIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5MSU5FQVIpO1xuICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSX01JUE1BUF9ORUFSRVNUKTtcbiAgZ2wuZ2VuZXJhdGVNaXBtYXAoZ2wuVEVYVFVSRV8yRCk7XG4gIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIG51bGwpO1xuXG4gIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBudWxsKVxuICBnbC51c2VQcm9ncmFtKG51bGwpXG4gIFxuICBjb25zdCByZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIgKCkge1xuICAgIGdsLnZpZXdwb3J0KDAsIDAsIGMud2lkdGgsIGMuaGVpZ2h0KVxuICAgIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQgfCBnbC5ERVBUSF9CVUZGRVJfQklUKVxuICAgIGdsLnVzZVByb2dyYW0ocClcblxuICAgIC8vIHVuaWZvcm1zXG4gICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMClcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlRGlmZnVzZSlcbiAgICBnbC51bmlmb3JtMWkodV9sb2MudV9kaWZmdXNlLCAwKSAvLyB0aGlzIDAgaXMgdGhlIHRleHR1cmUgcmVnaXN0ZXIgZm9yIGdsLlRFWFRVUkUwXG4gICAgZ2wudW5pZm9ybTFmKHVfbG9jLnVfdGltZSwgcGVyZm9ybWFuY2Uubm93KCkpXG5cblxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBnbEJ1ZmZlcilcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhX2xvYy5hX3Bvc2l0aW9uKVxuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoYV9sb2MuYV9wb3NpdGlvbiwgMywgZ2wuRkxPQVQsIGZhbHNlLCAwLCBhX3Bvc2l0aW9uLmJ5dGVPZmZzZXQpXG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYV9sb2MuYV9jb2xvcilcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGFfbG9jLmFfY29sb3IsIDQsIGdsLkZMT0FULCBmYWxzZSwgMCwgYV9jb2xvci5ieXRlT2Zmc2V0KVxuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGFfbG9jLmFfdGV4Q29vcmQpXG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihhX2xvYy5hX3RleENvb3JkLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIGFfdGV4Q29vcmQuYnl0ZU9mZnNldClcblxuICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVTLCAwLCBjb3VudClcblxuICAgIGdsLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShhX2xvYy5hX3Bvc2l0aW9uKVxuICAgIGdsLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShhX2xvYy5hX2NvbG9yKVxuICAgIGdsLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShhX2xvYy5hX3RleENvb3JkKVxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBudWxsKVxuXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgbnVsbCk7XG4gICAgZ2wudXNlUHJvZ3JhbShudWxsKVxuXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcilcbiAgfVxuICByZW5kZXIoKVxufVxuXG5jb25zdCBjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhcmdldCcpIGFzIEhUTUxDYW52YXNFbGVtZW50XG5jb25zdCBnbCA9IGMuZ2V0Q29udGV4dCgnd2ViZ2wnKSBhcyBXZWJHTFJlbmRlcmluZ0NvbnRleHRcblxubWFpbihnbClcbiJdfQ==
