(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";
var BufferType;
(function (BufferType) {
    BufferType[BufferType["BYTE"] = 0] = "BYTE";
    BufferType[BufferType["UNSIGNED_BYTE"] = 1] = "UNSIGNED_BYTE";
    BufferType[BufferType["SHORT"] = 2] = "SHORT";
    BufferType[BufferType["UNSIGNED_SHORT"] = 3] = "UNSIGNED_SHORT";
    BufferType[BufferType["FLOAT"] = 4] = "FLOAT";
})(BufferType = exports.BufferType || (exports.BufferType = {}));
class Floats {
    constructor(size, value) {
        this.size = size;
        this.value = value;
        this.offset = 0;
        this.stride = 0;
        this.bufferType = BufferType.FLOAT;
    }
    setup(gl, a) {
        const { loc, size, bufferType, buffer, stride = 0, offset = 0 } = a;
        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
        gl.enableVertexAttribArray(a.loc);
        gl.vertexAttribPointer(loc, size, toGLType(gl, bufferType), false, stride, offset);
    }
    set(gl, a, value) {
        gl.bufferData(gl.ARRAY_BUFFER, value, gl.DYNAMIC_DRAW);
    }
    teardown(gl, a) {
        gl.disableVertexAttribArray(a.loc);
        gl.bindBuffer(gl.ARRAY_BUFFER, null);
    }
}
exports.Floats = Floats;
function setupAttribute(gl, program, name, acfg) {
    const { value, bufferType, size, set, setup, teardown, offset = 0, stride = 0 } = acfg;
    const loc = gl.getAttribLocation(program, name);
    const buffer = gl.createBuffer();
    if (loc == null)
        return new Error(`Could not locate attr: ${name}`);
    if (buffer == null)
        return new Error(`Could not create buffer for attr: ${name}`);
    const a = { value, bufferType, size, offset, stride, loc, buffer, set, setup, teardown };
    setup(gl, a);
    set(gl, a, value);
    teardown(gl, a);
    return a;
}
exports.setupAttribute = setupAttribute;
function toGLType(gl, bufferType) {
    switch (bufferType) {
        case BufferType.FLOAT: return gl.FLOAT;
        case BufferType.SHORT: return gl.SHORT;
        case BufferType.BYTE: return gl.BYTE;
        case BufferType.UNSIGNED_SHORT: return gl.UNSIGNED_SHORT;
        case BufferType.UNSIGNED_BYTE: return gl.UNSIGNED_BYTE;
        default:
            const n = bufferType;
            return n;
    }
}

},{}],2:[function(require,module,exports){
"use strict";
const Uniforms_1 = require("./Uniforms");
const Attributes_1 = require("./Attributes");
function run(cmd, p) {
    const { gl, program } = cmd;
    const { attributes, uniforms, count } = p;
    gl.useProgram(program);
    for (const key in cmd.uniforms) {
        const { loc, value, set } = cmd.uniforms[key];
        const val = uniforms && uniforms[key] || value;
        set(gl, loc, val);
    }
    for (const key in cmd.attributes) {
        const a = cmd.attributes[key];
        const val = attributes && attributes[key];
        a.setup(gl, a);
        if (val != null)
            a.set(gl, a, val);
    }
    gl.drawArrays(gl.TRIANGLES, 0, count);
    for (const key in cmd.attributes) {
        const a = cmd.attributes[key];
        a.teardown(gl, a);
    }
    gl.useProgram(null);
}
exports.run = run;
function createCommand(gl, cfg) {
    const program = fromSource(gl, cfg.vsrc, cfg.fsrc);
    if (program instanceof Error)
        return program;
    const uniforms = setupUniforms(gl, program, cfg.uniforms);
    if (uniforms instanceof Error)
        uniforms;
    const attributes = setupAttributes(gl, program, cfg.attributes);
    if (attributes instanceof Error)
        return attributes;
    return { gl, program, uniforms, attributes };
}
exports.createCommand = createCommand;
function setupUniforms(gl, program, ucfgs) {
    const out = {};
    gl.useProgram(program);
    for (const key in ucfgs) {
        const uniform = Uniforms_1.setupUniform(gl, program, key, ucfgs[key]);
        if (uniform instanceof Error)
            return uniform;
        else
            out[key] = uniform;
    }
    gl.useProgram(null);
    return out;
}
function setupAttributes(gl, program, uattrs) {
    const out = {};
    gl.useProgram(program);
    for (const key in uattrs) {
        const attr = Attributes_1.setupAttribute(gl, program, key, uattrs[key]);
        if (attr instanceof Error)
            return attr;
        else
            out[key] = attr;
    }
    gl.useProgram(null);
    return out;
}
function compileShader(gl, kind, src) {
    const shader = gl.createShader(kind);
    const kindStr = kind === gl.VERTEX_SHADER ? 'VERTEX' : 'FRAGMENT';
    gl.shaderSource(shader, src);
    gl.compileShader(shader);
    return shader && gl.getShaderParameter(shader, gl.COMPILE_STATUS)
        ? shader
        : new Error(`${kindStr}: ${gl.getShaderInfoLog(shader) || ''}`);
}
exports.compileShader = compileShader;
function fromSource(gl, vsrc, fsrc) {
    const vertex = compileShader(gl, gl.VERTEX_SHADER, vsrc);
    const fragment = compileShader(gl, gl.FRAGMENT_SHADER, fsrc);
    const program = gl.createProgram();
    if (vertex instanceof Error)
        return vertex;
    if (fragment instanceof Error)
        return fragment;
    gl.attachShader(program, vertex);
    gl.attachShader(program, fragment);
    gl.linkProgram(program);
    return program && gl.getProgramParameter(program, gl.LINK_STATUS)
        ? program
        : new Error(gl.getProgramInfoLog(program) || '');
}
exports.fromSource = fromSource;

},{"./Attributes":1,"./Uniforms":4}],3:[function(require,module,exports){
"use strict";

},{}],4:[function(require,module,exports){
"use strict";
const utils_1 = require("./utils");
class UF {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform1f(h, t); }
}
exports.UF = UF;
class U2F {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform2f(h, t[0], t[1]); }
}
exports.U2F = U2F;
class U3F {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform3f(h, t[0], t[1], t[2]); }
}
exports.U3F = U3F;
class U4F {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform4f(h, t[0], t[1], t[2], t[3]); }
}
exports.U4F = U4F;
class UI {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform1i(h, t); }
}
exports.UI = UI;
class U2I {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform2i(h, t[0], t[1]); }
}
exports.U2I = U2I;
class U3I {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform3i(h, t[0], t[1], t[2]); }
}
exports.U3I = U3I;
class U4I {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform4i(h, t[0], t[1], t[2], t[3]); }
}
exports.U4I = U4I;
class UFV {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform1fv(h, utils_1.asF32(t)); }
}
exports.UFV = UFV;
class U2FV {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform2fv(h, utils_1.asF32(t)); }
}
exports.U2FV = U2FV;
class U3FV {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform3fv(h, utils_1.asF32(t)); }
}
exports.U3FV = U3FV;
class U4FV {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform4fv(h, utils_1.asF32(t)); }
}
exports.U4FV = U4FV;
class UIV {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform1iv(h, utils_1.asI32(t)); }
}
exports.UIV = UIV;
class U2IV {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform2iv(h, utils_1.asI32(t)); }
}
exports.U2IV = U2IV;
class U3IV {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform3iv(h, utils_1.asI32(t)); }
}
exports.U3IV = U3IV;
class U4IV {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniform4iv(h, utils_1.asI32(t)); }
}
exports.U4IV = U4IV;
class UMatrix2 {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniformMatrix2fv(h, false, utils_1.asF32(t)); }
}
exports.UMatrix2 = UMatrix2;
class UMatrix3 {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniformMatrix3fv(h, false, utils_1.asF32(t)); }
}
exports.UMatrix3 = UMatrix3;
class UMatrix4 {
    constructor(value) {
        this.value = value;
    }
    set(gl, h, t) { gl.uniformMatrix4fv(h, false, utils_1.asF32(t)); }
}
exports.UMatrix4 = UMatrix4;
function setupUniform(gl, program, name, ucfg) {
    const { value, set } = ucfg;
    const loc = gl.getUniformLocation(program, name);
    if (loc == null)
        return new Error(`Could not find uniform ${name}`);
    else
        return (set(gl, loc, value), { value, set, loc });
}
exports.setupUniform = setupUniform;

},{"./utils":6}],5:[function(require,module,exports){
"use strict";
const Attributes = require("./Attributes");
exports.Attributes = Attributes;
const Uniforms = require("./Uniforms");
exports.Uniforms = Uniforms;
const Command = require("./Command");
exports.Command = Command;
const GLTypes = require("./GLTypes");
exports.GLTypes = GLTypes;

},{"./Attributes":1,"./Command":2,"./GLTypes":3,"./Uniforms":4}],6:[function(require,module,exports){
"use strict";
function asF32(t) {
    return t instanceof Float32Array ? t : new Float32Array(t);
}
exports.asF32 = asF32;
function asI32(t) {
    return t instanceof Int32Array ? t : new Int32Array(t);
}
exports.asI32 = asI32;
function toError(s, v) {
    return v == null ? new Error(s) : v;
}
exports.toError = toError;

},{}],7:[function(require,module,exports){
"use strict";
function loadBinary(uri) {
    return new Promise(function (res, rej) {
        const xhr = new XMLHttpRequest;
        xhr.responseType = 'arraybuffer';
        xhr.onload = _ => res(xhr.response);
        xhr.onerror = _ => rej(`Could not load ${uri}`);
        xhr.open('GET', uri);
        xhr.send();
    });
}
exports.loadBinary = loadBinary;
function loadString(uri) {
    return new Promise(function (res, rej) {
        const xhr = new XMLHttpRequest;
        xhr.onload = _ => res(xhr.response);
        xhr.onerror = _ => rej(`Could not load ${uri}`);
        xhr.open('GET', uri);
        xhr.send();
    });
}
exports.loadString = loadString;
function loadImage(uri) {
    return new Promise(function (res, rej) {
        const i = new Image;
        i.src = uri;
        i.onload = _ => res(i);
        i.onerror = rej;
    });
}
exports.loadImage = loadImage;

},{}],8:[function(require,module,exports){
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments)).next());
    });
};
const Load_1 = require("./Load");
const Commando_1 = require("./Commando");
const F32_BYTE_SIZE = 4;
function load(gl) {
    return __awaiter(this, void 0, void 0, function* () {
        const [vsrc, fsrc, diffuse, buffer] = yield Promise.all([
            Load_1.loadString('brick/vertex.glsl'),
            Load_1.loadString('brick/fragment.glsl'),
            Load_1.loadImage('brick/diffuse.jpg'),
            Load_1.loadBinary('brick/data.bin')
        ]);
        const positionCount = 9;
        const colorCount = 12;
        const program = Commando_1.Command.fromSource(gl, vsrc, fsrc);
        const bufferViews = {
            a_position: new Float32Array(buffer, 0, positionCount),
            a_color: new Float32Array(buffer, positionCount * F32_BYTE_SIZE, colorCount)
        };
        const textures = {
            diffuse
        };
        return program instanceof Error
            ? program
            : { count: 3, program, buffer, bufferViews, textures };
    });
}
function main(gl) {
    return __awaiter(this, void 0, void 0, function* () {
        const sceneData = yield load(gl);
        if (sceneData instanceof Error)
            return;
        const { count, buffer: b, program: p, bufferViews: { a_position, a_color } } = sceneData;
        const a_loc = {
            a_position: gl.getAttribLocation(p, 'a_position'),
            a_color: gl.getAttribLocation(p, 'a_color')
        };
        const u_loc = {
            u_time: gl.getUniformLocation(p, 'u_time')
        };
        const glBuffer = gl.createBuffer();
        gl.enable(gl.CULL_FACE);
        gl.cullFace(gl.BACK);
        gl.clearColor(0, 0, 0, 0);
        gl.useProgram(p);
        gl.bindBuffer(gl.ARRAY_BUFFER, glBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, b, gl.DYNAMIC_DRAW);
        gl.bindBuffer(gl.ARRAY_BUFFER, null);
        gl.useProgram(null);
        const render = function render() {
            gl.viewport(0, 0, c.width, c.height);
            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
            gl.useProgram(p);
            gl.uniform1f(u_loc.u_time, performance.now());
            gl.bindBuffer(gl.ARRAY_BUFFER, glBuffer);
            gl.enableVertexAttribArray(a_loc.a_position);
            gl.vertexAttribPointer(a_loc.a_position, 3, gl.FLOAT, false, 0, a_position.byteOffset);
            gl.enableVertexAttribArray(a_loc.a_color);
            gl.vertexAttribPointer(a_loc.a_color, 4, gl.FLOAT, false, 0, a_position.byteLength);
            gl.drawArrays(gl.TRIANGLES, 0, count);
            gl.disableVertexAttribArray(a_loc.a_position);
            gl.disableVertexAttribArray(a_loc.a_color);
            gl.bindBuffer(gl.ARRAY_BUFFER, null);
            gl.useProgram(null);
            requestAnimationFrame(render);
        };
        render();
    });
}
const c = document.getElementById('target');
const gl = c.getContext('webgl');
main(gl);

},{"./Commando":5,"./Load":7}]},{},[8])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Vzci9sb2NhbC9saWIvbm9kZV9tb2R1bGVzL3dhdGNoaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvQ29tbWFuZG8vQXR0cmlidXRlcy50cyIsInNyYy9Db21tYW5kby9Db21tYW5kLnRzIiwic3JjL0NvbW1hbmRvL1VuaWZvcm1zLnRzIiwic3JjL0NvbW1hbmRvL2luZGV4LnRzIiwic3JjL0NvbW1hbmRvL3V0aWxzLnRzIiwic3JjL0xvYWQudHMiLCJzcmMvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUNnQkEsSUFBWSxVQUFnRTtBQUE1RSxXQUFZLFVBQVU7SUFBRywyQ0FBSSxDQUFBO0lBQUUsNkRBQWEsQ0FBQTtJQUFFLDZDQUFLLENBQUE7SUFBRSwrREFBYyxDQUFBO0lBQUUsNkNBQUssQ0FBQTtBQUFDLENBQUMsRUFBaEUsVUFBVSxHQUFWLGtCQUFVLEtBQVYsa0JBQVUsUUFBc0Q7QUFxQjVFO0lBSUUsWUFBb0IsSUFBbUIsRUFBUyxLQUFtQjtRQUEvQyxTQUFJLEdBQUosSUFBSSxDQUFlO1FBQVMsVUFBSyxHQUFMLEtBQUssQ0FBYztRQUhuRSxXQUFNLEdBQUcsQ0FBQyxDQUFBO1FBQ1YsV0FBTSxHQUFHLENBQUMsQ0FBQTtRQUNELGVBQVUsR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFBO0lBQ2lDLENBQUM7SUFDeEUsS0FBSyxDQUFDLEVBQU0sRUFBRSxDQUEwQjtRQUN0QyxNQUFNLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQTtRQUVuRSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUFDLENBQUE7UUFDdEMsRUFBRSxDQUFDLHVCQUF1QixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FB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QUFBO0lBQzNCLE1BQU0sRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQTtJQUV6QyxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBRXRCLEdBQUcsQ0FBQyxDQUFFLE1BQU0sR0FBRyxJQUFJLEdBQUcsQ0FBQyxRQUFTLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLE1BQU0sRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLEdBQUcsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDN0MsTUFBTSxHQUFHLEdBQUcsUUFBUSxJQUFJLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLENBQUE7UUFFOUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUE7SUFDbkIsQ0FBQztJQUVELEdBQUcsQ0FBQyxDQUFFLE1BQU0sR0FBRyxJQUFJLEdBQUcsQ0FBQyxVQUFXLENBQUMsQ0FBQyxDQUFDO1FBQ25DLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDN0IsTUFBTSxHQUFHLEdBQUcsVUFBVSxJQUFJLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUV6QyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUNkLEVBQUUsQ0FBQyxDQUFFLEdBQUcsSUFBSSxJQUFLLENBQUM7WUFBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUE7SUFDdEMsQ0FBQztJQUVELEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUE7SUFFckMsR0FBRyxDQUFDLENBQUUsTUFBTSxHQUFHLElBQUksR0FBRyxDQUFDLFVBQVcsQ0FBQyxDQUFDLENBQUM7UUFDbkMsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLFVBQVUsQ0FB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QUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUMzRTtBQUhELGtCQUdDO0FBRUQ7SUFDRSxZQUFvQixLQUFhO1FBQWIsVUFBSyxHQUFMLEtBQUssQ0FBUTtJQUFJLENBQUM7SUFDdEMsR0FBRyxDQUFFLEVBQU0sRUFBRSxDQUFNLEVBQUUsQ0FBUyxJQUFLLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLGFBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUNoRTtBQUhELGtCQUdDO0FBRUQ7SUFDRSxZQUFvQixLQUFhO1FBQWIsVUFBSyxHQUFMLEtBQUssQ0FBUTtJQUFJLENBQUM7SUFDdEMsR0FBRyxDQUFFLEVBQU0sRUFBRSxDQUFNLEVBQUUsQ0FBUyxJQUFLLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLGFBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUNoRTtBQUhELG9CQUdDO0FBRUQ7SUFDRSxZQUFvQixLQUFhO1FBQWIsVUFBSyxHQUFMLEtBQUssQ0FBUTtJQUFJLENBQUM7SUFDdEMsR0FBRyxDQUFFLEVBQU0sRUFBRSxDQUFNLEVBQUUsQ0FBUyxJQUFLLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLGFBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUNoRTtBQUhELG9CQUdDO0FBRUQ7SUFDRSxZQUFvQixLQUFhO1FBQWIsVUFBSyxHQUFMLEtBQUssQ0FBUTtJQUFJLENBQUM7SUFDdEMsR0FBRyxDQUFFLEVBQU0sRUFBRSxDQUFNLEVBQUUsQ0FBUyxJQUFLLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLGFBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQztDQUNoRTtBQUhELG9CQUdDO0FBRUQ7SUFDRSxZQUFvQixLQUFXO1FBQVgsVUFBSyxHQUFMLEtBQUssQ0FBTTtJQUFJLENBQUM7SUFDcEMsR0FBRyxDQUFFLEVB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LFlBQVksRUFBRSxDQUFBO1FBRWxDLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQ3ZCLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ3BCLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7UUFFekIsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNoQixFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsUUFBUSxDQUFDLENBQUE7UUFDeEMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsWUFBWSxDQUFDLENBQUE7UUFDbEQsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ3BDLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUE7UUFFbkIsTUFBTSxNQUFNLEdBQUc7WUFDYixFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUE7WUFDcEMsRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLEdBQUcsRUFBRSxDQUFDLGdCQUFnQixDQUFDLENBQUE7WUFDbkQsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUNoQixFQUFFLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUE7WUFDN0MsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxDQUFBO1lBQ3hDLEVBQUUsQ0FBQyx1QkFBdUIsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUE7WUFDNUMsRUFBRSxDQUFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUE7WUFDdEYsRUFBRSxDQUFDLHVCQUF1QixDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQTtZQUN6QyxFQUFFLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQTtZQUVuRixFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFBO1lBRXJDLEVBQUUsQ0FBQyx3QkFBd0IsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUE7WUFDN0MsRUFBRSxDQUFDLHdCQUF3QixDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQTtZQUMxQyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLENBQUE7WUFDcEMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUVuQixxQkFBcUIsQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUMvQixDQUFDLENBQUE7UUFDRCxNQUFNLEVBQUUsQ0FBQTtJQUNWLENBQUM7Q0FBQTtBQUVELE1BQU0sQ0FBQyxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFzQixDQUFBO0FBQ2hFLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUEwQixDQUFBO0FBRXpELElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgeyBHTCwgUHJvZ3JhbSB9IGZyb20gJy4vR0xUeXBlcydcblxuLypcbiAgVEhPVUdIVFMgT04gSU5ERVggLyBkcmF3RWxlbWVudHMgXG5cbiAgRWFjaCBjb21tYW5kIGlzIGVpdGhlciByZW5kZXJlcmVkIHdpdGggZHJhd0VsZW1lbnRzIG9yIGRyYXdBcnJheXNcbiAgdGhpcyBzaG91bGQgYmUgZGV0ZXJtaW5lZCBieSB3aGV0aGVyIHRoZSBjZmcgc3VwcGxpZXMgYW4gaW5kZXggYXR0cmlidXRlXG4gIGZvciB0aGUgXCJpbmRleFwiIHByb3BlcnR5LiAgSSB0aGluayB0aGlzIGlzIGJlc3Qgc2VwYXJhdGVkIGZyb20gZ2VuZXJhbFxuICBhdHRyaWJ1dGVzIGFzIGl0IHBsYXlzIGFuIGltcG9ydGFudCByb2xlIGluIGRldGVybWluaW5nIGhvdyB0aGUgY29tbWFuZFxuICB3aWxsIGJlIHVzZWQuICBGdXJ0aGVybW9yZSwgaXQgYWxzbyBzZWVtcyB0aGF0IHRoZXJlIGlzIG5vIG5lZWQgZm9yIHVzZXJcbiAgY3VzdG9taXphdGlvbiBmb3IgdGhpcyBwcm9wZXJ0eS4gIElmIHRoZXkgc3VwcGx5IGFuIEludDE2QXJyYXkgZm9yIHRoZSBcbiAgaW5kZXggcHJvcGVydHksIHRoZW4gdGhlIGNvbW1hbmQgd2lsbCBleGVjdXRlIHdpdGggZHJhd0VsZW1lbnRzXG4gIGFuZCBub3QgZHJhd0FycmF5c1xuKi9cblxuZXhwb3J0IHR5cGUgQXR0cmlidXRlU2l6ZSA9IDEgfCAyIHwgMyB8IDRcbmV4cG9ydCBlbnVtIEJ1ZmZlclR5cGUgeyBCWVRFLCBVTlNJR05FRF9CWVRFLCBTSE9SVCwgVU5TSUdORURfU0hPUlQsIEZMT0FUIH1cblxuZXhwb3J0IGludGVyZmFjZSBBdHRyaWJ1dGVDZmc8VD4geyBcbiAgdmFsdWU6IFRcbiAgcmVhZG9ubHkgYnVmZmVyVHlwZTogQnVmZmVyVHlwZVxuICBzaXplOiBBdHRyaWJ1dGVTaXplXG4gIG9mZnNldD86IG51bWJlclxuICBzdHJpZGU/OiBudW1iZXJcbiAgc2V0dXAoIGdsOiBHTCwgYTogQXR0cmlidXRlPFQ+ICk6IHZvaWRcbiAgc2V0KCBnbDogR0wsIGE6IEF0dHJpYnV0ZTxUPiwgdDogVCApOiB2b2lkXG4gIHRlYXJkb3duKCBnbDogR0wsIGE6IEF0dHJpYnV0ZTxUPiApOiB2b2lkXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXR0cmlidXRlPFQ+IGV4dGVuZHMgQXR0cmlidXRlQ2ZnPFQ+IHtcbiAgbG9jOiBudW1iZXJcbiAgYnVmZmVyOiBXZWJHTEJ1ZmZlclxufVxuXG5leHBvcnQgdHlwZSBBdHRyaWJ1dGVDZmdzPFQ+ID0geyBbIFAgaW4ga2V5b2YgVCBdOiBBdHRyaWJ1dGVDZmc8VFtQXT4gfVxuZXhwb3J0IHR5cGUgQXR0cmlidXRlczxUPiA9IHsgWyBQIGluIGtleW9mIFQgXTogQXR0cmlidXRlPFRbUF0+IH1cblxuZXhwb3J0IGNsYXNzIEZsb2F0cyBpbXBsZW1lbnRzIEF0dHJpYnV0ZUNmZzxGbG9hdDMyQXJyYXk+IHtcbiAgb2Zmc2V0ID0gMFxuICBzdHJpZGUgPSAwXG4gIHJlYWRvbmx5IGJ1ZmZlclR5cGUgPSBCdWZmZXJUeXBlLkZMT0FUXG4gIGNvbnN0cnVjdG9yKCBwdWJsaWMgc2l6ZTogQXR0cmlidXRlU2l6ZSwgcHVibGljIHZhbHVlOiBGbG9hdDMyQXJyYXkgKSB7fVxuICBzZXR1cChnbDogR0wsIGE6IEF0dHJpYnV0ZTxGbG9hdDMyQXJyYXk+ICkge1xuICAgIGNvbnN0IHsgbG9jLCBzaXplLCBidWZmZXJUeXBlLCBidWZmZXIsIHN0cmlkZSA9IDAsIG9mZnNldCA9IDAgfSA9IGFcblxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXIpXG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYS5sb2MpXG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihsb2MsIHNpemUsIHRvR0xUeXBlKGdsLCBidWZmZXJUeXBlKSwgZmFsc2UsIHN0cmlkZSwgb2Zmc2V0KVxuICB9XG4gIHNldCggZ2w6IEdMLCBhOiBBdHRyaWJ1dGU8RmxvYXQzMkFycmF5PiwgdmFsdWU6IEZsb2F0MzJBcnJheSApIHtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdmFsdWUsIGdsLkRZTkFNSUNfRFJBVylcbiAgfVxuICB0ZWFyZG93bihnbDogR0wsIGE6IEF0dHJpYnV0ZTxGbG9hdDMyQXJyYXk+ICkge1xuICAgIGdsLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShhLmxvYykgXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG51bGwpXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwQXR0cmlidXRlPFQ+ICggZ2w6IEdMLCBwcm9ncmFtOiBQcm9ncmFtLCBuYW1lOiBzdHJpbmcsIGFjZmc6IEF0dHJpYnV0ZUNmZzxUPiApOiBBdHRyaWJ1dGU8VD4gfCBFcnJvciB7XG4gIGNvbnN0IHsgdmFsdWUsIGJ1ZmZlclR5cGUsIHNpemUsIHNldCwgc2V0dXAsIHRlYXJkb3duLCBvZmZzZXQgPSAwLCBzdHJpZGUgPSAwIH0gPSBhY2ZnXG4gIGNvbnN0IGxvYyA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIG5hbWUpXG4gIGNvbnN0IGJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpXG5cbiAgaWYgKCBsb2MgPT0gbnVsbCApICAgIHJldHVybiBuZXcgRXJyb3IoYENvdWxkIG5vdCBsb2NhdGUgYXR0cjogJHsgbmFtZSB9YClcbiAgaWYgKCBidWZmZXIgPT0gbnVsbCApIHJldHVybiBuZXcgRXJyb3IoYENvdWxkIG5vdCBjcmVhdGUgYnVmZmVyIGZvciBhdHRyOiAkeyBuYW1lIH1gKVxuXG4gIGNvbnN0IGEgPSB7IHZhbHVlLCBidWZmZXJUeXBlLCBzaXplLCBvZmZzZXQsIHN0cmlkZSwgbG9jLCBidWZmZXIsIHNldCwgc2V0dXAsIHRlYXJkb3duIH1cblxuICBzZXR1cChnbCwgYSlcbiAgc2V0KGdsLCBhLCB2YWx1ZSlcbiAgdGVhcmRvd24oZ2wsIGEpXG4gIHJldHVybiBhXG59XG5cbmZ1bmN0aW9uIHRvR0xUeXBlICggZ2w6IEdMLCBidWZmZXJUeXBlOiBCdWZmZXJUeXBlICk6IG51bWJlciB7XG4gIHN3aXRjaCAoIGJ1ZmZlclR5cGUgKSB7XG4gICAgY2FzZSBCdWZmZXJUeXBlLkZMT0FUOiAgICAgICAgICByZXR1cm4gZ2wuRkxPQVRcbiAgICBjYXNlIEJ1ZmZlclR5cGUuU0hPUlQ6ICAgICAgICAgIHJldHVybiBnbC5TSE9SVFxuICAgIGNhc2UgQnVmZmVyVHlwZS5CWVRFOiAgICAgICAgICAgcmV0dXJuIGdsLkJZVEVcbiAgICBjYXNlIEJ1ZmZlclR5cGUuVU5TSUdORURfU0hPUlQ6IHJldHVybiBnbC5VTlNJR05FRF9TSE9SVFxuICAgIGNhc2UgQnVmZmVyVHlwZS5VTlNJR05FRF9CWVRFOiAgcmV0dXJuIGdsLlVOU0lHTkVEX0JZVEVcbiAgICBkZWZhdWx0OiBjb25zdCBuOiBuZXZlciA9IGJ1ZmZlclR5cGVcbiAgICAgICAgICAgICByZXR1cm4gblxuICB9XG59XG4iLCJpbXBvcnQgeyBHTCwgUHJvZ3JhbSwgU2hhZGVyLCBTaGFkZXJTcmMgfSBmcm9tICcuL0dMVHlwZXMnXG5pbXBvcnQgeyBVbmlmb3JtQ2ZncywgVW5pZm9ybXMsIHNldHVwVW5pZm9ybSB9IGZyb20gJy4vVW5pZm9ybXMnXG5pbXBvcnQgeyBBdHRyaWJ1dGVDZmdzLCBBdHRyaWJ1dGVzLCBzZXR1cEF0dHJpYnV0ZSB9IGZyb20gJy4vQXR0cmlidXRlcydcbmltcG9ydCB7IHRvRXJyb3IgfSBmcm9tICcuL3V0aWxzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbW1hbmRDZmc8VSwgQT4ge1xuICB2c3JjOiBzdHJpbmdcbiAgZnNyYzogc3RyaW5nXG4gIHVuaWZvcm1zOiBVbmlmb3JtQ2ZnczxVPlxuICBhdHRyaWJ1dGVzOiBBdHRyaWJ1dGVDZmdzPEE+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbWFuZDxVLCBBPiB7XG4gIGdsOiBHTFxuICBwcm9ncmFtOiBQcm9ncmFtXG4gIHVuaWZvcm1zOiBVbmlmb3JtczxVPlxuICBhdHRyaWJ1dGVzOiBBdHRyaWJ1dGVzPEE+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFyYW1zPFUsIEE+IHtcbiAgdW5pZm9ybXM/OiBQYXJ0aWFsPFU+XG4gIGF0dHJpYnV0ZXM/OiBQYXJ0aWFsPEE+IFxuICBjb3VudDogbnVtYmVyXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBydW48VSwgQT4gKCBjbWQ6IENvbW1hbmQ8VSwgQT4sIHA6IFBhcmFtczxVLCBBPiApIHtcbiAgY29uc3QgeyBnbCwgcHJvZ3JhbSB9ID0gY21kXG4gIGNvbnN0IHsgYXR0cmlidXRlcywgdW5pZm9ybXMsIGNvdW50IH0gPSBwXG5cbiAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKVxuXG4gIGZvciAoIGNvbnN0IGtleSBpbiBjbWQudW5pZm9ybXMgKSB7XG4gICAgY29uc3QgeyBsb2MsIHZhbHVlLCBzZXQgfSA9IGNtZC51bmlmb3Jtc1trZXldXG4gICAgY29uc3QgdmFsID0gdW5pZm9ybXMgJiYgdW5pZm9ybXNba2V5XSB8fCB2YWx1ZVxuXG4gICAgc2V0KGdsLCBsb2MsIHZhbClcbiAgfVxuXG4gIGZvciAoIGNvbnN0IGtleSBpbiBjbWQuYXR0cmlidXRlcyApIHtcbiAgICBjb25zdCBhID0gY21kLmF0dHJpYnV0ZXNba2V5XVxuICAgIGNvbnN0IHZhbCA9IGF0dHJpYnV0ZXMgJiYgYXR0cmlidXRlc1trZXldXG5cbiAgICBhLnNldHVwKGdsLCBhKVxuICAgIGlmICggdmFsICE9IG51bGwgKSBhLnNldChnbCwgYSwgdmFsKVxuICB9XG5cbiAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRVMsIDAsIGNvdW50KVxuXG4gIGZvciAoIGNvbnN0IGtleSBpbiBjbWQuYXR0cmlidXRlcyApIHtcbiAgICBjb25zdCBhID0gY21kLmF0dHJpYnV0ZXNba2V5XVxuXG4gICAgYS50ZWFyZG93bihnbCwgYSlcbiAgfVxuXG4gIGdsLnVzZVByb2dyYW0obnVsbClcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29tbWFuZDxVLCBBPiAoIGdsOiBHTCwgY2ZnOiBDb21tYW5kQ2ZnPFUsIEE+ICk6IENvbW1hbmQ8VSwgQT4gfCBFcnJvciB7XG4gIGNvbnN0IHByb2dyYW0gPSBmcm9tU291cmNlKGdsLCBjZmcudnNyYywgY2ZnLmZzcmMpXG5cbiAgaWYgKCBwcm9ncmFtIGluc3RhbmNlb2YgRXJyb3IgKSByZXR1cm4gcHJvZ3JhbVxuXG4gIGNvbnN0IHVuaWZvcm1zID0gc2V0dXBVbmlmb3JtcyhnbCwgcHJvZ3JhbSwgY2ZnLnVuaWZvcm1zKVxuXG4gIGlmICggdW5pZm9ybXMgaW5zdGFuY2VvZiBFcnJvciApIHVuaWZvcm1zXG5cbiAgY29uc3QgYXR0cmlidXRlcyA9IHNldHVwQXR0cmlidXRlcyhnbCwgcHJvZ3JhbSwgY2ZnLmF0dHJpYnV0ZXMpXG5cbiAgaWYgKCBhdHRyaWJ1dGVzIGluc3RhbmNlb2YgRXJyb3IgKSByZXR1cm4gYXR0cmlidXRlc1xuXG4gIHJldHVybiB7IGdsLCBwcm9ncmFtLCB1bmlmb3JtcywgYXR0cmlidXRlcyB9IGFzIENvbW1hbmQ8VSwgQT5cbn1cblxuZnVuY3Rpb24gc2V0dXBVbmlmb3JtczxUPiAoIGdsOiBHTCwgcHJvZ3JhbTogUHJvZ3JhbSwgdWNmZ3M6IFVuaWZvcm1DZmdzPFQ+ICk6IFVuaWZvcm1zPFQ+IHwgRXJyb3Ige1xuICBjb25zdCBvdXQgPSB7fSBhcyBVbmlmb3JtczxUPlxuXG4gIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSlcbiAgZm9yICggY29uc3Qga2V5IGluIHVjZmdzICkge1xuICAgIGNvbnN0IHVuaWZvcm0gPSBzZXR1cFVuaWZvcm0oZ2wsIHByb2dyYW0sIGtleSwgdWNmZ3Nba2V5XSlcblxuICAgIGlmICggdW5pZm9ybSBpbnN0YW5jZW9mIEVycm9yICkgcmV0dXJuIHVuaWZvcm1cbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dFtrZXldID0gdW5pZm9ybVxuICB9XG4gIGdsLnVzZVByb2dyYW0obnVsbClcbiAgcmV0dXJuIG91dFxufVxuXG5mdW5jdGlvbiBzZXR1cEF0dHJpYnV0ZXM8VD4gKCBnbDogR0wsIHByb2dyYW06IFByb2dyYW0sIHVhdHRyczogQXR0cmlidXRlQ2ZnczxUPiApOiBBdHRyaWJ1dGVzPFQ+IHwgRXJyb3Ige1xuICBjb25zdCBvdXQgPSB7fSBhcyBBdHRyaWJ1dGVzPFQ+XG5cbiAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKVxuICBmb3IgKCBjb25zdCBrZXkgaW4gdWF0dHJzICkge1xuICAgIGNvbnN0IGF0dHIgPSBzZXR1cEF0dHJpYnV0ZShnbCwgcHJvZ3JhbSwga2V5LCB1YXR0cnNba2V5XSlcblxuICAgIGlmICggYXR0ciBpbnN0YW5jZW9mIEVycm9yICkgcmV0dXJuIGF0dHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgIG91dFtrZXldID0gYXR0clxuICB9XG4gIGdsLnVzZVByb2dyYW0obnVsbClcbiAgcmV0dXJuIG91dCBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBpbGVTaGFkZXIgKCBnbDogR0wsIGtpbmQ6IG51bWJlciwgc3JjOiBTaGFkZXJTcmMgKTogU2hhZGVyIHwgRXJyb3Ige1xuICBjb25zdCBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoa2luZClcbiAgY29uc3Qga2luZFN0ciA9IGtpbmQgPT09IGdsLlZFUlRFWF9TSEFERVIgPyAnVkVSVEVYJyA6ICdGUkFHTUVOVCdcblxuICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzcmMpXG4gIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKVxuICByZXR1cm4gc2hhZGVyICYmIGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKVxuICAgID8gc2hhZGVyXG4gICAgOiBuZXcgRXJyb3IoYCR7IGtpbmRTdHIgfTogJHsgZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpIHx8ICcnIH1gKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVNvdXJjZSAoIGdsOiBHTCwgdnNyYzogU2hhZGVyU3JjLCBmc3JjOiBTaGFkZXJTcmMgKTogUHJvZ3JhbSB8IEVycm9yIHtcbiAgY29uc3QgdmVydGV4ID0gY29tcGlsZVNoYWRlcihnbCwgZ2wuVkVSVEVYX1NIQURFUiwgdnNyYylcbiAgY29uc3QgZnJhZ21lbnQgPSBjb21waWxlU2hhZGVyKGdsLCBnbC5GUkFHTUVOVF9TSEFERVIsIGZzcmMpXG4gIGNvbnN0IHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKClcblxuICBpZiAoIHZlcnRleCBpbnN0YW5jZW9mIEVycm9yICkgcmV0dXJuIHZlcnRleFxuICBpZiAoIGZyYWdtZW50IGluc3RhbmNlb2YgRXJyb3IgKSByZXR1cm4gZnJhZ21lbnRcblxuICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdmVydGV4KVxuICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnJhZ21lbnQpXG4gIGdsLmxpbmtQcm9ncmFtKHByb2dyYW0pXG5cbiAgcmV0dXJuIHByb2dyYW0gJiYgZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5MSU5LX1NUQVRVUykgXG4gICAgPyBwcm9ncmFtIFxuICAgIDogbmV3IEVycm9yKGdsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pIHx8ICcnKVxufVxuIiwiaW1wb3J0IHsgR0wsIFByb2dyYW0sIExvYywgRmxvYXRzLCBJbnRzIH0gZnJvbSAnLi9HTFR5cGVzJ1xuaW1wb3J0IHsgYXNGMzIsIGFzSTMyIH0gZnJvbSAnLi91dGlscydcblxuZXhwb3J0IGludGVyZmFjZSBVbmlmb3JtQ2ZnPFQ+IHsgXG4gIHZhbHVlOiBUXG4gIHNldCggZ2w6IEdMLCBoOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiwgdDogVCk6IHZvaWRcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVbmlmb3JtPFQ+IGV4dGVuZHMgVW5pZm9ybUNmZzxUPiB7IFxuICBsb2M6IFdlYkdMVW5pZm9ybUxvY2F0aW9uXG59XG5cbmV4cG9ydCB0eXBlIFVuaWZvcm1DZmdzPFQ+ID0geyBbIFAgaW4ga2V5b2YgVCBdOiBVbmlmb3JtQ2ZnPFRbUF0+IH1cbmV4cG9ydCB0eXBlIFVuaWZvcm1zPFQ+ID0geyBbIFAgaW4ga2V5b2YgVCBdOiBVbmlmb3JtPFRbUF0+IH1cblxuZXhwb3J0IGNsYXNzIFVGIGltcGxlbWVudHMgVW5pZm9ybUNmZzxudW1iZXI+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogbnVtYmVyICkge31cbiAgc2V0KCBnbDogR0wsIGg6IExvYywgdDogbnVtYmVyICkgeyBnbC51bmlmb3JtMWYoaCwgdCkgfVxufVxuXG5leHBvcnQgY2xhc3MgVTJGIGltcGxlbWVudHMgVW5pZm9ybUNmZzxGbG9hdHM+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogRmxvYXRzICkge31cbiAgc2V0KCBnbDogR0wsIGg6IExvYywgdDogRmxvYXRzICkgeyBnbC51bmlmb3JtMmYoaCwgdFswXSwgdFsxXSkgfVxufVxuXG5leHBvcnQgY2xhc3MgVTNGIGltcGxlbWVudHMgVW5pZm9ybUNmZzxGbG9hdHM+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogRmxvYXRzICkge31cbiAgc2V0KCBnbDogR0wsIGg6IExvYywgdDogRmxvYXRzICkgeyBnbC51bmlmb3JtM2YoaCwgdFswXSwgdFsxXSwgdFsyXSkgfVxufVxuXG5leHBvcnQgY2xhc3MgVTRGIGltcGxlbWVudHMgVW5pZm9ybUNmZzxGbG9hdHM+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogRmxvYXRzICkge31cbiAgc2V0KCBnbDogR0wsIGg6IExvYywgdDogRmxvYXRzICkgeyBnbC51bmlmb3JtNGYoaCwgdFswXSwgdFsxXSwgdFsyXSwgdFszXSkgfVxufVxuXG5leHBvcnQgY2xhc3MgVUkgaW1wbGVtZW50cyBVbmlmb3JtQ2ZnPG51bWJlcj4ge1xuICBjb25zdHJ1Y3RvciggcHVibGljIHZhbHVlOiBudW1iZXIgKSB7fVxuICBzZXQoIGdsOiBHTCwgaDogTG9jLCB0OiBudW1iZXIgKSB7IGdsLnVuaWZvcm0xaShoLCB0KSB9XG59XG5cbmV4cG9ydCBjbGFzcyBVMkkgaW1wbGVtZW50cyBVbmlmb3JtQ2ZnPEludHM+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogSW50cyApIHt9XG4gIHNldCggZ2w6IEdMLCBoOiBMb2MsIHQ6IEludHMgKSB7IGdsLnVuaWZvcm0yaShoLCB0WzBdLCB0WzFdKSB9XG59XG5cbmV4cG9ydCBjbGFzcyBVM0kgaW1wbGVtZW50cyBVbmlmb3JtQ2ZnPEludHM+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogSW50cyApIHt9XG4gIHNldCggZ2w6IEdMLCBoOiBMb2MsIHQ6IEludHMgKSB7IGdsLnVuaWZvcm0zaShoLCB0WzBdLCB0WzFdLCB0WzJdKSB9XG59XG5cbmV4cG9ydCBjbGFzcyBVNEkgaW1wbGVtZW50cyBVbmlmb3JtQ2ZnPEludHM+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogSW50cyApIHt9XG4gIHNldCggZ2w6IEdMLCBoOiBMb2MsIHQ6IEludHMgKSB7IGdsLnVuaWZvcm00aShoLCB0WzBdLCB0WzFdLCB0WzJdLCB0WzNdKSB9XG59XG5cbmV4cG9ydCBjbGFzcyBVRlYgaW1wbGVtZW50cyBVbmlmb3JtQ2ZnPEZsb2F0cz4ge1xuICBjb25zdHJ1Y3RvciggcHVibGljIHZhbHVlOiBGbG9hdHMgKSB7fVxuICBzZXQoIGdsOiBHTCwgaDogTG9jLCB0OiBGbG9hdHMgKSB7IGdsLnVuaWZvcm0xZnYoaCwgYXNGMzIodCkpIH1cbn1cblxuZXhwb3J0IGNsYXNzIFUyRlYgaW1wbGVtZW50cyBVbmlmb3JtQ2ZnPEZsb2F0cz4ge1xuICBjb25zdHJ1Y3RvciggcHVibGljIHZhbHVlOiBGbG9hdHMgKSB7fVxuICBzZXQoIGdsOiBHTCwgaDogTG9jLCB0OiBGbG9hdHMgKSB7IGdsLnVuaWZvcm0yZnYoaCwgYXNGMzIodCkpIH1cbn1cblxuZXhwb3J0IGNsYXNzIFUzRlYgaW1wbGVtZW50cyBVbmlmb3JtQ2ZnPEZsb2F0cz4ge1xuICBjb25zdHJ1Y3RvciggcHVibGljIHZhbHVlOiBGbG9hdHMgKSB7fVxuICBzZXQoIGdsOiBHTCwgaDogTG9jLCB0OiBGbG9hdHMgKSB7IGdsLnVuaWZvcm0zZnYoaCwgYXNGMzIodCkpIH1cbn1cblxuZXhwb3J0IGNsYXNzIFU0RlYgaW1wbGVtZW50cyBVbmlmb3JtQ2ZnPEZsb2F0cz4ge1xuICBjb25zdHJ1Y3RvciggcHVibGljIHZhbHVlOiBGbG9hdHMgKSB7fVxuICBzZXQoIGdsOiBHTCwgaDogTG9jLCB0OiBGbG9hdHMgKSB7IGdsLnVuaWZvcm00ZnYoaCwgYXNGMzIodCkpIH1cbn1cblxuZXhwb3J0IGNsYXNzIFVJViBpbXBsZW1lbnRzIFVuaWZvcm1DZmc8SW50cz4ge1xuICBjb25zdHJ1Y3RvciggcHVibGljIHZhbHVlOiBJbnRzICkge31cbiAgc2V0KCBnbDogR0wsIGg6IExvYywgdDogSW50cyApIHsgZ2wudW5pZm9ybTFpdihoLCBhc0kzMih0KSkgfVxufVxuXG5leHBvcnQgY2xhc3MgVTJJViBpbXBsZW1lbnRzIFVuaWZvcm1DZmc8SW50cz4ge1xuICBjb25zdHJ1Y3RvciggcHVibGljIHZhbHVlOiBJbnRzICkge31cbiAgc2V0KCBnbDogR0wsIGg6IExvYywgdDogSW50cyApIHsgZ2wudW5pZm9ybTJpdihoLCBhc0kzMih0KSkgfVxufVxuXG5leHBvcnQgY2xhc3MgVTNJViBpbXBsZW1lbnRzIFVuaWZvcm1DZmc8SW50cz4ge1xuICBjb25zdHJ1Y3RvciggcHVibGljIHZhbHVlOiBJbnRzICkge31cbiAgc2V0KCBnbDogR0wsIGg6IExvYywgdDogSW50cyApIHsgZ2wudW5pZm9ybTNpdihoLCBhc0kzMih0KSkgfVxufVxuXG5leHBvcnQgY2xhc3MgVTRJViBpbXBsZW1lbnRzIFVuaWZvcm1DZmc8SW50cz4ge1xuICBjb25zdHJ1Y3RvciggcHVibGljIHZhbHVlOiBJbnRzICkge31cbiAgc2V0KCBnbDogR0wsIGg6IExvYywgdDogSW50cyApIHsgZ2wudW5pZm9ybTRpdihoLCBhc0kzMih0KSkgfVxufVxuXG5leHBvcnQgY2xhc3MgVU1hdHJpeDIgaW1wbGVtZW50cyBVbmlmb3JtQ2ZnPEZsb2F0cz4ge1xuICBjb25zdHJ1Y3RvciggcHVibGljIHZhbHVlOiBGbG9hdHMgKSB7fVxuICBzZXQoIGdsOiBHTCwgaDogTG9jLCB0OiBGbG9hdHMgKSB7IGdsLnVuaWZvcm1NYXRyaXgyZnYoaCwgZmFsc2UsIGFzRjMyKHQpKSB9XG59XG5cbmV4cG9ydCBjbGFzcyBVTWF0cml4MyBpbXBsZW1lbnRzIFVuaWZvcm1DZmc8RmxvYXRzPiB7XG4gIGNvbnN0cnVjdG9yKCBwdWJsaWMgdmFsdWU6IEZsb2F0cyApIHt9XG4gIHNldCggZ2w6IEdMLCBoOiBMb2MsIHQ6IEZsb2F0cyApIHsgZ2wudW5pZm9ybU1hdHJpeDNmdihoLCBmYWxzZSwgYXNGMzIodCkpIH1cbn1cblxuZXhwb3J0IGNsYXNzIFVNYXRyaXg0IGltcGxlbWVudHMgVW5pZm9ybUNmZzxGbG9hdHM+IHtcbiAgY29uc3RydWN0b3IoIHB1YmxpYyB2YWx1ZTogRmxvYXRzICkge31cbiAgc2V0KCBnbDogR0wsIGg6IExvYywgdDogRmxvYXRzICkgeyBnbC51bmlmb3JtTWF0cml4NGZ2KGgsIGZhbHNlLCBhc0YzMih0KSkgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBVbmlmb3JtPFQ+ICggZ2w6IEdMLCBwcm9ncmFtOiBQcm9ncmFtLCBuYW1lOiBzdHJpbmcsIHVjZmc6IFVuaWZvcm1DZmc8VD4gKTogVW5pZm9ybTxUPiB8IEVycm9yIHtcbiAgY29uc3QgeyB2YWx1ZSwgc2V0IH0gPSB1Y2ZnXG4gIGNvbnN0IGxvYyA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBuYW1lKVxuXG4gIGlmICggbG9jID09IG51bGwgKSByZXR1cm4gbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCB1bmlmb3JtICR7IG5hbWUgfWApXG4gIGVsc2UgICAgICAgICAgICAgICByZXR1cm4gKHNldChnbCwgbG9jLCB2YWx1ZSksIHsgdmFsdWUsIHNldCwgbG9jIH0pXG59XG4iLCJpbXBvcnQgKiBhcyBBdHRyaWJ1dGVzIGZyb20gJy4vQXR0cmlidXRlcydcbmltcG9ydCAqIGFzIFVuaWZvcm1zIGZyb20gJy4vVW5pZm9ybXMnXG5pbXBvcnQgKiBhcyBDb21tYW5kIGZyb20gJy4vQ29tbWFuZCdcbmltcG9ydCAqIGFzIEdMVHlwZXMgZnJvbSAnLi9HTFR5cGVzJ1xuXG5leHBvcnQgeyBBdHRyaWJ1dGVzLCBVbmlmb3JtcywgQ29tbWFuZCwgR0xUeXBlcyB9XG4iLCJpbXBvcnQgeyBGbG9hdHMsIEludHMgfSBmcm9tICcuL0dMVHlwZXMnXG5cbmV4cG9ydCBmdW5jdGlvbiBhc0YzMiAoIHQ6IEZsb2F0cyApOiBGbG9hdDMyQXJyYXkge1xuICByZXR1cm4gdCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSA/IHQgOiBuZXcgRmxvYXQzMkFycmF5KHQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhc0kzMiAoIHQ6IEludHMgKTogSW50MzJBcnJheSB7XG4gIHJldHVybiB0IGluc3RhbmNlb2YgSW50MzJBcnJheSA/IHQgOiBuZXcgSW50MzJBcnJheSh0KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9FcnJvcjxUPiAoIHM6IHN0cmluZywgdjogVCB8IG51bGwgKTogVCB8IEVycm9yIHtcbiAgcmV0dXJuIHYgPT0gbnVsbCA/IG5ldyBFcnJvcihzKSA6IHZcbn1cblxuIiwiZXhwb3J0IGZ1bmN0aW9uIGxvYWRCaW5hcnkgKCB1cmk6IHN0cmluZyApOiBQcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzLCByZWopIHtcbiAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3RcblxuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInXG4gICAgeGhyLm9ubG9hZCA9IF8gPT4gcmVzKHhoci5yZXNwb25zZSlcbiAgICB4aHIub25lcnJvciA9IF8gPT4gcmVqKGBDb3VsZCBub3QgbG9hZCAkeyB1cmkgfWApXG4gICAgeGhyLm9wZW4oJ0dFVCcsIHVyaSlcbiAgICB4aHIuc2VuZCgpXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkU3RyaW5nICggdXJpOiBzdHJpbmcgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMsIHJlaikge1xuICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdFxuXG4gICAgeGhyLm9ubG9hZCA9IF8gPT4gcmVzKHhoci5yZXNwb25zZSlcbiAgICB4aHIub25lcnJvciA9IF8gPT4gcmVqKGBDb3VsZCBub3QgbG9hZCAkeyB1cmkgfWApXG4gICAgeGhyLm9wZW4oJ0dFVCcsIHVyaSlcbiAgICB4aHIuc2VuZCgpXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkSW1hZ2UgKCB1cmk6IHN0cmluZyApOiBQcm9taXNlPEhUTUxJbWFnZUVsZW1lbnQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICggcmVzLCByZWogKSB7XG4gICAgY29uc3QgaSA9IG5ldyBJbWFnZVxuXG4gICAgaS5zcmMgPSB1cmlcbiAgICBpLm9ubG9hZCA9IF8gPT4gcmVzKGkpXG4gICAgaS5vbmVycm9yID0gcmVqXG4gIH0pXG59XG4iLCJpbXBvcnQgeyBsb2FkU3RyaW5nLCBsb2FkQmluYXJ5LCBsb2FkSW1hZ2UgfSBmcm9tICcuL0xvYWQnXG5pbXBvcnQgeyBwYXJzZU9CSiB9IGZyb20gJy4vUGFyc2Vycy9PQkonXG5pbXBvcnQgeyBWMywgTTQsIGlkZW50aXR5LCB0cmFuc2xhdGUsIHJvdGF0ZVgsIHJvdGF0ZVksIHJvdGF0ZVosIHNjYWxlLCBsb29rQXQsIHBlcnNwZWN0aXZlIH0gZnJvbSAnLi9NYXRyaXgnXG5pbXBvcnQgeyBBdHRyaWJ1dGVzLCBVbmlmb3JtcywgQ29tbWFuZCB9IGZyb20gJy4vQ29tbWFuZG8nXG5pbXBvcnQgeyBjb250YWluaW5nIH0gZnJvbSAnLi91dGlscydcblxuY29uc3QgRjMyX0JZVEVfU0laRSA9IDRcblxuaW50ZXJmYWNlIFNjZW5lIHtcbiAgY291bnQ6IG51bWJlclxuICBwcm9ncmFtOiBXZWJHTFByb2dyYW1cbiAgYnVmZmVyOiBBcnJheUJ1ZmZlclxuICBidWZmZXJWaWV3czoge1xuICAgIGFfcG9zaXRpb246IEFycmF5QnVmZmVyVmlld1xuICAgIGFfY29sb3I6IEFycmF5QnVmZmVyVmlld1xuICB9XG4gIHRleHR1cmVzOiB7XG4gICAgZGlmZnVzZTogSFRNTEltYWdlRWxlbWVudCBcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBsb2FkICggZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCApOiBQcm9taXNlPFNjZW5lIHwgRXJyb3I+IHtcbiAgY29uc3QgWyB2c3JjLCBmc3JjLCBkaWZmdXNlLCBidWZmZXIgXSA9IGF3YWl0IFByb21pc2UuYWxsKFsgXG4gICAgbG9hZFN0cmluZygnYnJpY2svdmVydGV4Lmdsc2wnKSxcbiAgICBsb2FkU3RyaW5nKCdicmljay9mcmFnbWVudC5nbHNsJyksXG4gICAgbG9hZEltYWdlKCdicmljay9kaWZmdXNlLmpwZycpLFxuICAgIGxvYWRCaW5hcnkoJ2JyaWNrL2RhdGEuYmluJylcbiAgXSlcbiAgY29uc3QgcG9zaXRpb25Db3VudCA9IDlcbiAgY29uc3QgY29sb3JDb3VudCA9IDEyXG4gIGNvbnN0IHByb2dyYW0gPSBDb21tYW5kLmZyb21Tb3VyY2UoZ2wsIHZzcmMsIGZzcmMpXG4gIGNvbnN0IGJ1ZmZlclZpZXdzID0ge1xuICAgIGFfcG9zaXRpb246IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLCAwLCBwb3NpdGlvbkNvdW50KSxcbiAgICBhX2NvbG9yOiBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlciwgcG9zaXRpb25Db3VudCAqIEYzMl9CWVRFX1NJWkUsIGNvbG9yQ291bnQpXG4gIH1cbiAgY29uc3QgdGV4dHVyZXMgPSB7XG4gICAgZGlmZnVzZSBcbiAgfVxuXG4gIHJldHVybiBwcm9ncmFtIGluc3RhbmNlb2YgRXJyb3IgXG4gICAgPyBwcm9ncmFtXG4gICAgOiB7IGNvdW50OiAzLCBwcm9ncmFtLCBidWZmZXIsIGJ1ZmZlclZpZXdzLCB0ZXh0dXJlcyB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIG1haW4gKCBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0ICkgeyBcbiAgY29uc3Qgc2NlbmVEYXRhID0gYXdhaXQgbG9hZChnbClcblxuICBpZiAoIHNjZW5lRGF0YSBpbnN0YW5jZW9mIEVycm9yICkgcmV0dXJuXG5cbiAgY29uc3QgeyBjb3VudCwgYnVmZmVyOiBiLCBwcm9ncmFtOiBwLCBidWZmZXJWaWV3czogeyBhX3Bvc2l0aW9uLCBhX2NvbG9yIH0gfSA9IHNjZW5lRGF0YVxuICBjb25zdCBhX2xvYyA9IHtcbiAgICBhX3Bvc2l0aW9uOiBnbC5nZXRBdHRyaWJMb2NhdGlvbihwLCAnYV9wb3NpdGlvbicpLFxuICAgIGFfY29sb3I6IGdsLmdldEF0dHJpYkxvY2F0aW9uKHAsICdhX2NvbG9yJylcbiAgfVxuICBjb25zdCB1X2xvYyA9IHtcbiAgICB1X3RpbWU6IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwLCAndV90aW1lJykgXG4gIH1cbiAgY29uc3QgZ2xCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKVxuXG4gIGdsLmVuYWJsZShnbC5DVUxMX0ZBQ0UpXG4gIGdsLmN1bGxGYWNlKGdsLkJBQ0spXG4gIGdsLmNsZWFyQ29sb3IoMCwgMCwgMCwgMClcblxuICBnbC51c2VQcm9ncmFtKHApXG4gIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBnbEJ1ZmZlcilcbiAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIGIsIGdsLkRZTkFNSUNfRFJBVylcbiAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG51bGwpXG4gIGdsLnVzZVByb2dyYW0obnVsbClcbiAgXG4gIGNvbnN0IHJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlciAoKSB7XG4gICAgZ2wudmlld3BvcnQoMCwgMCwgYy53aWR0aCwgYy5oZWlnaHQpXG4gICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCB8IGdsLkRFUFRIX0JVRkZFUl9CSVQpXG4gICAgZ2wudXNlUHJvZ3JhbShwKVxuICAgIGdsLnVuaWZvcm0xZih1X2xvYy51X3RpbWUsIHBlcmZvcm1hbmNlLm5vdygpKVxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBnbEJ1ZmZlcilcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhX2xvYy5hX3Bvc2l0aW9uKVxuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoYV9sb2MuYV9wb3NpdGlvbiwgMywgZ2wuRkxPQVQsIGZhbHNlLCAwLCBhX3Bvc2l0aW9uLmJ5dGVPZmZzZXQpXG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYV9sb2MuYV9jb2xvcilcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGFfbG9jLmFfY29sb3IsIDQsIGdsLkZMT0FULCBmYWxzZSwgMCwgYV9wb3NpdGlvbi5ieXRlTGVuZ3RoKVxuXG4gICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRVMsIDAsIGNvdW50KVxuXG4gICAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGFfbG9jLmFfcG9zaXRpb24pXG4gICAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGFfbG9jLmFfY29sb3IpXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG51bGwpXG4gICAgZ2wudXNlUHJvZ3JhbShudWxsKVxuXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcilcbiAgfVxuICByZW5kZXIoKVxufVxuXG5jb25zdCBjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhcmdldCcpIGFzIEhUTUxDYW52YXNFbGVtZW50XG5jb25zdCBnbCA9IGMuZ2V0Q29udGV4dCgnd2ViZ2wnKSBhcyBXZWJHTFJlbmRlcmluZ0NvbnRleHRcblxubWFpbihnbClcbiJdfQ==
